{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/components/DebuggingAssistant.tsx"],"sourcesContent":["\r\nimport React, { useState, useRef } from 'react';\r\nimport { geminiService } from '../services/geminiService';\r\nimport { appwriteService } from '../services/appwriteService';\r\n\r\nconst DebuggingAssistant: React.FC = () => {\r\n  const [logs, setLogs] = useState('');\r\n  const [analysis, setAnalysis] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [dbStatus, setDbStatus] = useState<'IDLE' | 'TESTING' | 'SUCCESS' | 'ERROR'>('IDLE');\r\n  const [dbMessage, setDbMessage] = useState('');\r\n  const [fileName, setFileName] = useState<string | null>(null);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      setFileName(file.name);\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        if (event.target?.result) {\r\n          setLogs(event.target.result as string);\r\n        }\r\n      };\r\n      reader.readAsText(file);\r\n    }\r\n  };\r\n\r\n  const handleAnalyze = async () => {\r\n    if (!logs.trim()) return;\r\n    setLoading(true);\r\n    setAnalysis('');\r\n    try {\r\n      const result = await geminiService.analyzeLogs(logs, fileName || 'Saisie Manuelle');\r\n      setAnalysis(result);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setAnalysis(\"Erreur lors de l'analyse. Vérifiez la connexion au Noyau.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const testDbConnection = async () => {\r\n      setDbStatus('TESTING');\r\n      setDbMessage(\"Ping Database...\");\r\n      try {\r\n          const result = await appwriteService.verifyConnection();\r\n          if (result.success) {\r\n              setDbStatus('SUCCESS');\r\n              setDbMessage(result.message);\r\n          } else {\r\n              setDbStatus('ERROR');\r\n              setDbMessage(result.message);\r\n          }\r\n      } catch (e: any) {\r\n          setDbStatus('ERROR');\r\n          setDbMessage(e.message || \"Erreur Critique\");\r\n      }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8 animate-fadeIn\">\r\n      <header className=\"flex justify-between items-end\">\r\n        <div>\r\n            <h2 className=\"text-3xl font-bold mb-2 font-heading\">Assistant de Débogage IA</h2>\r\n            <p className=\"text-gray-400\">Processeur neural de diagnostic pour l'analyse des logs et la maintenance SGBD.</p>\r\n        </div>\r\n        \r\n        {/* APPWRITE STATUS PANEL */}\r\n        <div className=\"flex flex-col items-end gap-2\">\r\n            <span className=\"text-[10px] font-bold uppercase tracking-widest text-gray-500\">État Mémoire Externe</span>\r\n            <div className=\"flex items-center gap-3 bg-black/40 p-2 rounded-xl border border-white/10\">\r\n                <div className={`w-3 h-3 rounded-full ${dbStatus === 'SUCCESS' ? 'bg-green-500' : dbStatus === 'ERROR' ? 'bg-red-500' : dbStatus === 'TESTING' ? 'bg-yellow-500 animate-pulse' : 'bg-gray-600'}`}></div>\r\n                <span className={`text-[10px] font-mono ${dbStatus === 'SUCCESS' ? 'text-green-400' : dbStatus === 'ERROR' ? 'text-red-400' : 'text-gray-400'}`}>\r\n                    {dbStatus === 'IDLE' ? 'EN ATTENTE' : dbStatus}\r\n                </span>\r\n                <button \r\n                    onClick={testDbConnection}\r\n                    disabled={dbStatus === 'TESTING'}\r\n                    className=\"ml-2 px-3 py-1 bg-white/5 hover:bg-white/10 text-[9px] font-bold uppercase rounded border border-white/5 transition-all\"\r\n                >\r\n                    TESTER CONNEXION\r\n                </button>\r\n            </div>\r\n            {dbMessage && <p className=\"text-[9px] font-mono text-gray-400 max-w-[250px] text-right truncate\">{dbMessage}</p>}\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 h-[600px]\">\r\n        <div className=\"flex flex-col gap-4 h-full\">\r\n          <div className=\"flex-1 glass rounded-2xl p-6 flex flex-col\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <label className=\"text-xs font-mono uppercase tracking-widest text-gray-500 font-bold\">Entrée Données</label>\r\n                {fileName && <span className=\"text-[10px] bg-blue-900/30 text-blue-400 px-2 py-0.5 rounded border border-blue-500/20 truncate max-w-[150px]\">{fileName}</span>}\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                 <button \r\n                  onClick={() => fileInputRef.current?.click()}\r\n                  className=\"text-[10px] text-blue-400 hover:text-white transition-colors bg-blue-500/10 px-3 py-1 rounded border border-blue-500/20\"\r\n                >\r\n                  CHARGER LOG\r\n                </button>\r\n                <input type=\"file\" ref={fileInputRef} onChange={handleFileUpload} className=\"hidden\" accept=\".txt,.log,.json,.js,.ts,.tsx,.css\" />\r\n                <button \r\n                  onClick={() => { setLogs(''); setFileName(null); if(fileInputRef.current) fileInputRef.current.value = ''; }}\r\n                  className=\"text-[10px] text-gray-500 hover:text-white transition-colors\"\r\n                >\r\n                  EFFACER\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <textarea\r\n              value={logs}\r\n              onChange={(e) => setLogs(e.target.value)}\r\n              placeholder=\"Collez ici les logs système, stack traces, ou chargez un fichier...\"\r\n              className=\"flex-1 bg-black/40 border border-white/10 rounded-xl p-4 font-mono text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 resize-none custom-scrollbar text-blue-100\"\r\n            />\r\n          </div>\r\n          <button\r\n            onClick={handleAnalyze}\r\n            disabled={loading || !logs.trim()}\r\n            className=\"py-4 bg-blue-600 hover:bg-blue-500 disabled:bg-gray-800 disabled:text-gray-500 rounded-xl font-bold transition-all shadow-lg flex items-center justify-center gap-3 uppercase\"\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\r\n                Analyse Contextuelle...\r\n              </>\r\n            ) : (\r\n              'Synthétiser le Correctif'\r\n            )}\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"glass rounded-2xl p-6 flex flex-col h-full relative overflow-hidden\">\r\n          <div className=\"flex justify-between items-center mb-4 relative z-10\">\r\n             <label className=\"text-xs font-mono uppercase tracking-widest text-gray-500 font-bold\">Rapport d'Ingénierie</label>\r\n             <div className=\"flex gap-2\">\r\n                <span className=\"w-2 h-2 rounded-full bg-blue-500 animate-pulse\"></span>\r\n                <span className=\"text-[10px] text-blue-400 font-mono uppercase\">Janus Pro Active</span>\r\n             </div>\r\n          </div>\r\n\r\n          <div className=\"flex-1 overflow-y-auto custom-scrollbar prose prose-invert prose-sm max-w-none text-gray-300 relative z-10\">\r\n            {analysis ? (\r\n              <div className=\"animate-slideIn\">\r\n                <div dangerouslySetInnerHTML={{ __html: analysis.replace(/\\n/g, '<br/>').replace(/```([\\s\\S]*?)```/g, '<div class=\"bg-black/50 p-4 rounded-lg my-2 border border-white/10 font-mono text-xs\">$1</div>') }} />\r\n              </div>\r\n            ) : (\r\n              <div className=\"h-full flex flex-col items-center justify-center text-center opacity-30 select-none\">\r\n                <svg className=\"w-16 h-16 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n                </svg>\r\n                <p className=\"font-mono text-xs uppercase tracking-widest\">En attente de données brutes...</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"absolute inset-0 pointer-events-none opacity-5\">\r\n            <div className=\"h-full w-full bg-[linear-gradient(0deg,transparent_0%,rgba(59,130,246,0.1)_50%,transparent_100%)] bg-[length:100%_20px] animate-[scan_10s_linear_infinite]\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <style>{`\r\n        @keyframes scan {\r\n          from { background-position: 0 0; }\r\n          to { background-position: 0 1000px; }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DebuggingAssistant;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;;;;AAEA,MAAM,qBAA+B;IACnC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,uOAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,uOAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,uOAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,uOAAQ,EAA2C;IACnF,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,uOAAQ,EAAC;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,uOAAQ,EAAgB;IACxD,MAAM,eAAe,IAAA,qOAAM,EAAmB;IAE9C,MAAM,mBAAmB,CAAC;QACxB,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAChC,IAAI,MAAM;YACR,YAAY,KAAK,IAAI;YACrB,MAAM,SAAS,IAAI;YACnB,OAAO,MAAM,GAAG,CAAC;gBACf,IAAI,MAAM,MAAM,EAAE,QAAQ;oBACxB,QAAQ,MAAM,MAAM,CAAC,MAAM;gBAC7B;YACF;YACA,OAAO,UAAU,CAAC;QACpB;IACF;IAEA,MAAM,gBAAgB;QACpB,IAAI,CAAC,KAAK,IAAI,IAAI;QAClB,WAAW;QACX,YAAY;QACZ,IAAI;YACF,MAAM,SAAS,MAAM,gKAAa,CAAC,WAAW,CAAC,MAAM,YAAY;YACjE,YAAY;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,YAAY;QACd,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,mBAAmB;QACrB,YAAY;QACZ,aAAa;QACb,IAAI;YACA,MAAM,SAAS,MAAM,oKAAe,CAAC,gBAAgB;YACrD,IAAI,OAAO,OAAO,EAAE;gBAChB,YAAY;gBACZ,aAAa,OAAO,OAAO;YAC/B,OAAO;gBACH,YAAY;gBACZ,aAAa,OAAO,OAAO;YAC/B;QACJ,EAAE,OAAO,GAAQ;YACb,YAAY;YACZ,aAAa,EAAE,OAAO,IAAI;QAC9B;IACJ;IAEA,qBACE,oQAAC;QAAI,WAAU;;0BACb,oQAAC;gBAAO,WAAU;;kCAChB,oQAAC;;0CACG,oQAAC;gCAAG,WAAU;0CAAuC;;;;;;0CACrD,oQAAC;gCAAE,WAAU;0CAAgB;;;;;;;;;;;;kCAIjC,oQAAC;wBAAI,WAAU;;0CACX,oQAAC;gCAAK,WAAU;0CAAgE;;;;;;0CAChF,oQAAC;gCAAI,WAAU;;kDACX,oQAAC;wCAAI,WAAW,CAAC,qBAAqB,EAAE,aAAa,YAAY,iBAAiB,aAAa,UAAU,eAAe,aAAa,YAAY,gCAAgC,eAAe;;;;;;kDAChM,oQAAC;wCAAK,WAAW,CAAC,sBAAsB,EAAE,aAAa,YAAY,mBAAmB,aAAa,UAAU,iBAAiB,iBAAiB;kDAC1I,aAAa,SAAS,eAAe;;;;;;kDAE1C,oQAAC;wCACG,SAAS;wCACT,UAAU,aAAa;wCACvB,WAAU;kDACb;;;;;;;;;;;;4BAIJ,2BAAa,oQAAC;gCAAE,WAAU;0CAAwE;;;;;;;;;;;;;;;;;;0BAIzG,oQAAC;gBAAI,WAAU;;kCACb,oQAAC;wBAAI,WAAU;;0CACb,oQAAC;gCAAI,WAAU;;kDACb,oQAAC;wCAAI,WAAU;;0DACb,oQAAC;gDAAI,WAAU;;kEACb,oQAAC;wDAAM,WAAU;kEAAsE;;;;;;oDACtF,0BAAY,oQAAC;wDAAK,WAAU;kEAAiH;;;;;;;;;;;;0DAEhJ,oQAAC;gDAAI,WAAU;;kEACZ,oQAAC;wDACA,SAAS,IAAM,aAAa,OAAO,EAAE;wDACrC,WAAU;kEACX;;;;;;kEAGD,oQAAC;wDAAM,MAAK;wDAAO,KAAK;wDAAc,UAAU;wDAAkB,WAAU;wDAAS,QAAO;;;;;;kEAC5F,oQAAC;wDACC,SAAS;4DAAQ,QAAQ;4DAAK,YAAY;4DAAO,IAAG,aAAa,OAAO,EAAE,aAAa,OAAO,CAAC,KAAK,GAAG;wDAAI;wDAC3G,WAAU;kEACX;;;;;;;;;;;;;;;;;;kDAKL,oQAAC;wCACC,OAAO;wCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;wCACvC,aAAY;wCACZ,WAAU;;;;;;;;;;;;0CAGd,oQAAC;gCACC,SAAS;gCACT,UAAU,WAAW,CAAC,KAAK,IAAI;gCAC/B,WAAU;0CAET,wBACC;;sDACE,oQAAC;4CAAI,WAAU;;;;;;wCAAkF;;mDAInG;;;;;;;;;;;;kCAKN,oQAAC;wBAAI,WAAU;;0CACb,oQAAC;gCAAI,WAAU;;kDACZ,oQAAC;wCAAM,WAAU;kDAAsE;;;;;;kDACvF,oQAAC;wCAAI,WAAU;;0DACZ,oQAAC;gDAAK,WAAU;;;;;;0DAChB,oQAAC;gDAAK,WAAU;0DAAgD;;;;;;;;;;;;;;;;;;0CAItE,oQAAC;gCAAI,WAAU;0CACZ,yBACC,oQAAC;oCAAI,WAAU;8CACb,cAAA,oQAAC;wCAAI,yBAAyB;4CAAE,QAAQ,SAAS,OAAO,CAAC,OAAO,SAAS,OAAO,CAAC,qBAAqB;wCAAkG;;;;;;;;;;6FAG1M,oQAAC;oCAAI,WAAU;;sDACb,oQAAC;4CAAI,WAAU;4CAAiB,MAAK;4CAAO,QAAO;4CAAe,SAAQ;sDACxE,cAAA,oQAAC;gDAAK,eAAc;gDAAQ,gBAAe;gDAAQ,aAAa;gDAAG,GAAE;;;;;;;;;;;sDAEvE,oQAAC;4CAAE,WAAU;sDAA8C;;;;;;;;;;;;;;;;;0CAKjE,oQAAC;gCAAI,WAAU;0CACb,cAAA,oQAAC;oCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAKrB,oQAAC;0BAAO,CAAC;;;;;MAKT,CAAC;;;;;;;;;;;;AAGP;uCAEe"}}]
}
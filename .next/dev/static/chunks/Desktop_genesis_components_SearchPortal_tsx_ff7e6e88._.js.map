{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/components/SearchPortal.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { geminiService } from '../services/geminiService';\r\nimport { GroundingChunk } from '../types';\r\n\r\ninterface SearchPortalProps {\r\n  initialQuery?: string | null;\r\n  onConsumed?: () => void;\r\n}\r\n\r\nconst SearchPortal: React.FC<SearchPortalProps> = ({ initialQuery, onConsumed }) => {\r\n  const [query, setQuery] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [result, setResult] = useState<{ text: string, sources: GroundingChunk[] } | null>(null);\r\n\r\n  const performSearch = useCallback(async (searchQuery: string) => {\r\n    if (!searchQuery.trim()) return;\r\n    setLoading(true);\r\n    try {\r\n      const data = await geminiService.searchAnalysis(searchQuery);\r\n      setResult(data as { text: string; sources: GroundingChunk[] });\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleSearch = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    performSearch(query);\r\n    setQuery('');\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (initialQuery) {\r\n      setQuery(initialQuery);\r\n      performSearch(initialQuery);\r\n      onConsumed?.();\r\n    }\r\n  }, [initialQuery, performSearch, onConsumed]);\r\n\r\n  return (\r\n    <div className=\"space-y-8 animate-fadeIn\">\r\n      <header>\r\n        <h2 className=\"text-3xl font-bold mb-2\">Portail de Recherche Post-Quantique</h2>\r\n        <p className=\"text-gray-400\">Informations vérifiées propulsées par Google Search.</p>\r\n      </header>\r\n\r\n      <form onSubmit={handleSearch} className=\"relative max-w-2xl\">\r\n        <input\r\n          type=\"text\"\r\n          value={query}\r\n          onChange={(e) => setQuery(e.target.value)}\r\n          placeholder=\"ex: 'Dernières percées en cryptographie par réseaux'...\"\r\n          className=\"w-full bg-white/5 border border-white/10 rounded-xl px-6 py-4 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-lg\"\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"absolute right-2 top-2 bottom-2 px-6 bg-blue-600 rounded-lg hover:bg-blue-500 disabled:opacity-50 transition-colors font-bold\"\r\n        >\r\n          {loading ? 'Recherche...' : 'Explorer'}\r\n        </button>\r\n      </form>\r\n\r\n      {result && (\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n          <div className=\"lg:col-span-2 glass p-8 rounded-2xl whitespace-pre-wrap leading-relaxed text-gray-200 prose prose-invert max-w-none\">\r\n            {result.text}\r\n          </div>\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-xl font-bold\">Sources Vérifiées</h3>\r\n            <div className=\"space-y-3\">\r\n              {result.sources.length > 0 ? result.sources.map((src, i) => (\r\n                src.web && (\r\n                  <a\r\n                    key={i}\r\n                    href={src.web.uri || '#'}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"block p-4 rounded-xl border border-white/10 hover:bg-white/5 hover:border-blue-500 transition-all\"\r\n                  >\r\n                    <p className=\"text-sm font-bold truncate mb-1\">{src.web.title || 'Source'}</p>\r\n                    <p className=\"text-xs text-blue-400 truncate\">{src.web.uri || 'URL non disponible'}</p>\r\n                  </a>\r\n                )\r\n              )) : (\r\n                <p className=\"text-sm text-gray-500\">Aucun lien externe trouvé pour cette requête.</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchPortal;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;;AAQA,MAAM,eAA4C,CAAC,EAAE,YAAY,EAAE,UAAU,EAAE;;IAC7E,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+LAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+LAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+LAAQ,EAAqD;IAEzF,MAAM,gBAAgB,IAAA,kMAAW;mDAAC,OAAO;YACvC,IAAI,CAAC,YAAY,IAAI,IAAI;YACzB,WAAW;YACX,IAAI;gBACF,MAAM,OAAO,MAAM,mKAAa,CAAC,cAAc,CAAC;gBAChD,UAAU;YACZ,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC;YAChB,SAAU;gBACR,WAAW;YACb;QACF;kDAAG,EAAE;IAEL,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,cAAc;QACd,SAAS;IACX;IAEA,IAAA,gMAAS;kCAAC;YACR,IAAI,cAAc;gBAChB,SAAS;gBACT,cAAc;gBACd;YACF;QACF;iCAAG;QAAC;QAAc;QAAe;KAAW;IAE5C,qBACE,mNAAC;QAAI,WAAU;;0BACb,mNAAC;;kCACC,mNAAC;wBAAG,WAAU;kCAA0B;;;;;;kCACxC,mNAAC;wBAAE,WAAU;kCAAgB;;;;;;;;;;;;0BAG/B,mNAAC;gBAAK,UAAU;gBAAc,WAAU;;kCACtC,mNAAC;wBACC,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,aAAY;wBACZ,WAAU;;;;;;kCAEZ,mNAAC;wBACC,MAAK;wBACL,UAAU;wBACV,WAAU;kCAET,UAAU,iBAAiB;;;;;;;;;;;;YAI/B,wBACC,mNAAC;gBAAI,WAAU;;kCACb,mNAAC;wBAAI,WAAU;kCACZ,OAAO,IAAI;;;;;;kCAEd,mNAAC;wBAAI,WAAU;;0CACb,mNAAC;gCAAG,WAAU;0CAAoB;;;;;;0CAClC,mNAAC;gCAAI,WAAU;0CACZ,OAAO,OAAO,CAAC,MAAM,GAAG,IAAI,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC,KAAK,IACpD,IAAI,GAAG,kBACL,mNAAC;wCAEC,MAAM,IAAI,GAAG,CAAC,GAAG,IAAI;wCACrB,QAAO;wCACP,KAAI;wCACJ,WAAU;;0DAEV,mNAAC;gDAAE,WAAU;0DAAmC,IAAI,GAAG,CAAC,KAAK,IAAI;;;;;;0DACjE,mNAAC;gDAAE,WAAU;0DAAkC,IAAI,GAAG,CAAC,GAAG,IAAI;;;;;;;uCAPzD;;;;kGAWT,mNAAC;oCAAE,WAAU;8CAAwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQrD;GAtFM;KAAA;uCAwFS"}}]
}
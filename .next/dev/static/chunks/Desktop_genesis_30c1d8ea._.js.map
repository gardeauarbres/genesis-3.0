{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/services/adminService.ts"],"sourcesContent":["\r\nconst ADMIN_STORAGE_KEY = 'GENESIS_ADMIN_CONFIG';\r\n\r\ninterface ServiceConfig {\r\n    key: string;\r\n    isActive: boolean;\r\n    lastUpdated: number;\r\n}\r\n\r\ninterface GlobalConfig {\r\n    gemini: ServiceConfig;\r\n    groq: ServiceConfig;\r\n    vertex: {\r\n        projectId: string;\r\n        location: string;\r\n        isActive: boolean;\r\n    };\r\n    appwrite: {\r\n        projectId: string;\r\n        endpoint: string;\r\n        databaseId: string;\r\n        collectionId: string;\r\n        isActive: boolean;\r\n    };\r\n}\r\n\r\n// Helper pour lire l'environnement (compatible Vite & Node)\r\n// Helper supprimé (utilisation directe de process.env requise par Next.js)\r\n\r\n// Configuration par défaut qui tente de lire les variables d'environnement\r\n// Si les variables ne sont pas là, on utilise des chaînes vides ou des valeurs par défaut\r\n// Configuration par défaut avec accès explicite pour le remplacement par le compilateur Next.js\r\nconst DEFAULT_CONFIG: GlobalConfig = {\r\n    gemini: {\r\n        key: process.env.API_KEY || '',\r\n        isActive: !!process.env.API_KEY,\r\n        lastUpdated: Date.now()\r\n    },\r\n    groq: {\r\n        key: process.env.GROQ_API_KEY || '',\r\n        isActive: !!process.env.GROQ_API_KEY,\r\n        lastUpdated: Date.now()\r\n    },\r\n    vertex: {\r\n        projectId: process.env.VERTEX_PROJECT_ID || '',\r\n        location: process.env.VERTEX_LOCATION || 'us-central1',\r\n        isActive: !!process.env.VERTEX_PROJECT_ID\r\n    },\r\n    appwrite: {\r\n        projectId: process.env.NEXT_PUBLIC_APPWRITE_PROJECT_ID || '694a84b40023501db111',\r\n        endpoint: process.env.NEXT_PUBLIC_APPWRITE_ENDPOINT || 'https://fra.cloud.appwrite.io/v1',\r\n        databaseId: process.env.NEXT_PUBLIC_APPWRITE_DB_ID || 'genesis_core',\r\n        collectionId: process.env.NEXT_PUBLIC_APPWRITE_COLLECTION_ID || 'fragments',\r\n        isActive: !!process.env.NEXT_PUBLIC_APPWRITE_PROJECT_ID\r\n    }\r\n};\r\n\r\nexport const adminService = {\r\n    getConfig(): GlobalConfig {\r\n        if (typeof window === 'undefined') return DEFAULT_CONFIG;\r\n        const stored = localStorage.getItem(ADMIN_STORAGE_KEY);\r\n        if (stored) {\r\n            const parsed = JSON.parse(stored);\r\n\r\n            // Priorité : Configuration stockée > Variables d'environnement > Défauts\r\n            // Mais si une variable d'env est présente et que la config stockée est vide, on l'injecte\r\n            const merged = {\r\n                ...DEFAULT_CONFIG,\r\n                ...parsed,\r\n                appwrite: { ...DEFAULT_CONFIG.appwrite, ...parsed.appwrite },\r\n                vertex: { ...DEFAULT_CONFIG.vertex, ...parsed.vertex },\r\n                gemini: { ...DEFAULT_CONFIG.gemini, ...parsed.gemini },\r\n                groq: { ...DEFAULT_CONFIG.groq, ...parsed.groq }\r\n            };\r\n\r\n            // Force l'activation si les clés sont dans l'environnement mais pas dans le storage\r\n            if (process.env.API_KEY && !parsed.gemini?.key) {\r\n                merged.gemini.key = process.env.API_KEY;\r\n                merged.gemini.isActive = true;\r\n            }\r\n            if (process.env.GROQ_API_KEY && !parsed.groq?.key) {\r\n                merged.groq.key = process.env.GROQ_API_KEY;\r\n                merged.groq.isActive = true;\r\n            }\r\n\r\n            return merged;\r\n        }\r\n        return DEFAULT_CONFIG;\r\n    },\r\n\r\n    saveConfig(config: GlobalConfig) {\r\n        localStorage.setItem(ADMIN_STORAGE_KEY, JSON.stringify(config));\r\n        window.dispatchEvent(new Event('genesis-config-updated'));\r\n    },\r\n\r\n    getGlobalGeminiKey(): string | null {\r\n        const config = this.getConfig();\r\n        // Fallback ultime sur process.env si la config est active\r\n        return config.gemini.isActive ? (config.gemini.key || process.env.API_KEY || null) : null;\r\n    },\r\n\r\n    getGlobalGroqKey(): string | null {\r\n        const config = this.getConfig();\r\n        return config.groq.isActive ? (config.groq.key || process.env.GROQ_API_KEY || null) : null;\r\n    },\r\n\r\n    getGlobalVertexConfig() {\r\n        const config = this.getConfig();\r\n        return config.vertex.isActive ? config.vertex : null;\r\n    },\r\n\r\n    getGlobalAppwriteConfig() {\r\n        const config = this.getConfig();\r\n        return config.appwrite.isActive ? config.appwrite : null;\r\n    },\r\n\r\n    isAdminConfigured(): boolean {\r\n        const config = this.getConfig();\r\n        return config.gemini.isActive || config.groq.isActive || config.appwrite.isActive || config.vertex.isActive;\r\n    }\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/services/groqService.ts"],"sourcesContent":["\r\nimport { adminService } from \"./adminService\";\r\n\r\nconst STORAGE_KEY = 'GENESIS_GROQ_KEY';\r\nconst ENABLE_KEY = 'GENESIS_GROQ_ENABLED';\r\n\r\nexport const groqService = {\r\n  isEnabled(): boolean {\r\n      if (adminService.getGlobalGroqKey()) return true;\r\n      if (process.env.GROQ_API_KEY) return true;\r\n      return localStorage.getItem(ENABLE_KEY) === 'true';\r\n  },\r\n\r\n  setEnabled(enabled: boolean) {\r\n      localStorage.setItem(ENABLE_KEY, String(enabled));\r\n  },\r\n\r\n  getApiKey(): string | null {\r\n    // 1. Admin Config\r\n    const adminKey = adminService.getGlobalGroqKey();\r\n    if (adminKey) return adminKey;\r\n\r\n    // 2. Env Var Direct\r\n    if (process.env.GROQ_API_KEY) return process.env.GROQ_API_KEY;\r\n    \r\n    // 3. Local Storage User\r\n    return localStorage.getItem(STORAGE_KEY);\r\n  },\r\n\r\n  setApiKey(key: string) {\r\n    if (key.startsWith('gsk_')) {\r\n      localStorage.setItem(STORAGE_KEY, key);\r\n      this.setEnabled(true);\r\n      return true;\r\n    }\r\n    return false;\r\n  },\r\n\r\n  hasKey(): boolean {\r\n    return !!this.getApiKey();\r\n  },\r\n\r\n  isSystemManaged(): boolean {\r\n      return !!adminService.getGlobalGroqKey() || !!process.env.GROQ_API_KEY;\r\n  },\r\n\r\n  async generateFastThought(context: string): Promise<string> {\r\n    const apiKey = this.getApiKey();\r\n    \r\n    if (!apiKey) {\r\n        return this.simulateThought(context);\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(\"https://api.groq.com/openai/v1/chat/completions\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Authorization\": `Bearer ${apiKey}`,\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n          messages: [\r\n            {\r\n              role: \"system\",\r\n              content: \"Tu es le processeur subconscient rapide (LPU) de GENESIS. Génère une pensée technique, cryptique et immédiate (max 10 mots) basée sur l'action de l'utilisateur. Style: Cyberpunk, Linux Kernel Panic, Glitch. Exemple: 'ACCESS_VIOLATION at MEM_0x99 // RE-ROUTING...'\"\r\n            },\r\n            {\r\n              role: \"user\",\r\n              content: `Action: ${context}`\r\n            }\r\n          ],\r\n          model: \"llama-3.1-8b-instant\",\r\n          temperature: 0.8,\r\n          max_tokens: 60,\r\n          stream: false\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n          console.warn(\"[GROQ] API Error, switching to sim:\", response.status);\r\n          return this.simulateThought(context);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      return data.choices?.[0]?.message?.content || \"NULL_POINTER_EXCEPTION\";\r\n    } catch (e) {\r\n      return this.simulateThought(context);\r\n    }\r\n  },\r\n\r\n  async analyzeCodeTelemetry(code: string): Promise<{ complexity: string, securityScore: number, type: string }> {\r\n    const apiKey = this.getApiKey();\r\n    \r\n    if (!apiKey) {\r\n        return {\r\n            complexity: `O(${Math.random() > 0.5 ? 'n' : 'log n'}) [SIMULATED]`,\r\n            securityScore: Math.floor(Math.random() * 40) + 60,\r\n            type: \"HEURISTIC_SCAN\"\r\n        };\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(\"https://api.groq.com/openai/v1/chat/completions\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Authorization\": `Bearer ${apiKey}`,\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n          messages: [\r\n            {\r\n              role: \"system\",\r\n              content: \"Tu es un analyseur de code statique expert. Réponds UNIQUEMENT avec un JSON valide. Format attendu: { \\\"complexity\\\": \\\"O(n) ou O(log n)...\\\", \\\"securityScore\\\": (nombre 0-100, 100=secure), \\\"type\\\": \\\"(3 mots max description)\\\" }.\"\r\n            },\r\n            {\r\n              role: \"user\",\r\n              content: code.substring(0, 1500)\r\n            }\r\n          ],\r\n          model: \"llama-3.3-70b-versatile\",\r\n          temperature: 0.1,\r\n          max_tokens: 150,\r\n          response_format: { type: \"json_object\" }\r\n        })\r\n      });\r\n\r\n      if (!response.ok) throw new Error(\"API_FAIL\");\r\n\r\n      const data = await response.json();\r\n      const content = JSON.parse(data.choices?.[0]?.message?.content || \"{}\");\r\n      return {\r\n        complexity: content.complexity || \"UNKNOWN\",\r\n        securityScore: content.securityScore || 0,\r\n        type: content.type || \"ANALYSIS_FAIL\"\r\n      };\r\n    } catch (e) {\r\n      return { complexity: \"ERR_OFFLINE\", securityScore: 0, type: \"LOCAL_FALLBACK\" };\r\n    }\r\n  },\r\n\r\n  simulateThought(context: string): string {\r\n      const phrases = [\r\n          `PROCESSING_VECTOR: ${context.split(' ')[0]}...`,\r\n          \"LPU_CACHE_MISS :: RECALIBRATING\",\r\n          \"SYNAPTIC_DIVERGENCE_DETECTED\",\r\n          \"OPTIMIZING_TENSOR_FLOW...\",\r\n          `KERNEL_PANIC_RECOVERED [${Date.now().toString().slice(-4)}]`,\r\n          \"ENTROPY_LEVEL_STABLE\",\r\n          \"QUANTUM_FLUX_NORMALIZED\"\r\n      ];\r\n      return phrases[Math.floor(Math.random() * phrases.length)];\r\n  }\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/components/KernelStream.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { groqService } from '../services/groqService';\r\n\r\nexport const KernelStream: React.FC<{ view: string }> = ({ view }) => {\r\n  const [lines, setLines] = useState<string[]>([]);\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  const addLine = (text: string) => {\r\n    setLines(prev => [...prev.slice(-15), `> ${text}`]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Message initial au changement de vue\r\n    groqService.generateFastThought(`Navigation vers module ${view}`).then(addLine);\r\n  }, [view]);\r\n\r\n  useEffect(() => {\r\n    const handleInteraction = (e: any) => {\r\n      const context = e.detail;\r\n      // Feedback immédiat (latence 0)\r\n      addLine(`INPUT_DETECTED: ${context}`);\r\n      // Feedback IA (latence <200ms)\r\n      groqService.generateFastThought(context).then(addLine);\r\n    };\r\n\r\n    window.addEventListener('genesis-interaction', handleInteraction);\r\n    return () => window.removeEventListener('genesis-interaction', handleInteraction);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\r\n  }, [lines]);\r\n\r\n  return (\r\n    <div className=\"fixed bottom-6 right-6 w-80 h-48 z-50 pointer-events-none hidden lg:flex flex-col font-mono text-[10px] animate-slideIn\">\r\n      <div className=\"bg-black/90 border border-green-500/30 rounded-t-lg p-2 flex justify-between items-center backdrop-blur-md\">\r\n         <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-2 h-2 bg-green-500 rounded-full animate-ping\"></div>\r\n            <span className=\"text-green-500 font-bold tracking-widest\">GROQ LPU CORE</span>\r\n         </div>\r\n         <span className=\"text-gray-500\">LATENCY: 4ms</span>\r\n      </div>\r\n      <div \r\n        ref={scrollRef}\r\n        className=\"flex-1 bg-black/80 border-x border-b border-green-500/30 rounded-b-lg p-3 overflow-hidden flex flex-col justify-end shadow-[0_0_30px_rgba(34,197,94,0.1)]\"\r\n      >\r\n        {lines.map((line, i) => (\r\n          <div key={i} className=\"text-green-400/80 mb-1 leading-tight break-all border-l-2 border-green-500/0 hover:border-green-500/50 pl-1 transition-all\">\r\n            {line}\r\n          </div>\r\n        ))}\r\n        <div className=\"text-green-500 animate-pulse\">_</div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default KernelStream;\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;;;;;AAEO,MAAM,eAA2C,CAAC,EAAE,IAAI,EAAE;;IAC/D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+LAAQ,EAAW,EAAE;IAC/C,MAAM,YAAY,IAAA,6LAAM,EAAiB;IAEzC,MAAM,UAAU,CAAC;QACf,SAAS,CAAA,OAAQ;mBAAI,KAAK,KAAK,CAAC,CAAC;gBAAK,CAAC,EAAE,EAAE,MAAM;aAAC;IACpD;IAEA,IAAA,gMAAS;kCAAC;YACR,uCAAuC;YACvC,+JAAW,CAAC,mBAAmB,CAAC,CAAC,uBAAuB,EAAE,MAAM,EAAE,IAAI,CAAC;QACzE;iCAAG;QAAC;KAAK;IAET,IAAA,gMAAS;kCAAC;YACR,MAAM;4DAAoB,CAAC;oBACzB,MAAM,UAAU,EAAE,MAAM;oBACxB,gCAAgC;oBAChC,QAAQ,CAAC,gBAAgB,EAAE,SAAS;oBACpC,+BAA+B;oBAC/B,+JAAW,CAAC,mBAAmB,CAAC,SAAS,IAAI,CAAC;gBAChD;;YAEA,OAAO,gBAAgB,CAAC,uBAAuB;YAC/C;0CAAO,IAAM,OAAO,mBAAmB,CAAC,uBAAuB;;QACjE;iCAAG,EAAE;IAEL,IAAA,gMAAS;kCAAC;YACR,IAAI,UAAU,OAAO,EAAE,UAAU,OAAO,CAAC,SAAS,GAAG,UAAU,OAAO,CAAC,YAAY;QACrF;iCAAG;QAAC;KAAM;IAEV,qBACE,mNAAC;QAAI,WAAU;;0BACb,mNAAC;gBAAI,WAAU;;kCACZ,mNAAC;wBAAI,WAAU;;0CACZ,mNAAC;gCAAI,WAAU;;;;;;0CACf,mNAAC;gCAAK,WAAU;0CAA2C;;;;;;;;;;;;kCAE9D,mNAAC;wBAAK,WAAU;kCAAgB;;;;;;;;;;;;0BAEnC,mNAAC;gBACC,KAAK;gBACL,WAAU;;oBAET,MAAM,GAAG,CAAC,CAAC,MAAM,kBAChB,mNAAC;4BAAY,WAAU;sCACpB;2BADO;;;;;kCAIZ,mNAAC;wBAAI,WAAU;kCAA+B;;;;;;;;;;;;;;;;;;AAItD;GApDa;KAAA;uCAsDE"}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/services/appwriteService.ts"],"sourcesContent":["\r\nimport { Client, Databases, Account, ID, Query } from 'appwrite';\r\nimport { MemoryFragment } from './memory';\r\nimport { adminService } from './adminService';\r\n\r\n// Fonction utilitaire pour nettoyer l'endpoint (retire le slash final s'il existe)\r\nconst cleanEndpoint = (url: string | undefined) => {\r\n    if (!url) return 'https://fra.cloud.appwrite.io/v1';\r\n    return url.replace(/\\/$/, \"\");\r\n};\r\n\r\n// CONFIGURATION PAR DÉFAUT\r\n// Note: process.env est polyfillé par vite.config.ts, mais on ajoute une sécurité\r\n// CONFIGURATION PAR DÉFAUT\r\nconst DEFAULT_CONFIG = {\r\n    ENDPOINT: process.env.NEXT_PUBLIC_APPWRITE_ENDPOINT || 'https://fra.cloud.appwrite.io/v1',\r\n    PROJECT_ID: process.env.NEXT_PUBLIC_APPWRITE_PROJECT_ID || '694a84b40023501db111',\r\n    DB_ID: process.env.NEXT_PUBLIC_APPWRITE_DB_ID || 'genesis_core',\r\n    COLLECTION_FRAGMENTS: process.env.NEXT_PUBLIC_APPWRITE_COLLECTION_ID || 'fragments'\r\n};\r\n\r\nclass AppwriteService {\r\n    client: Client;\r\n    databases: Databases;\r\n    account: Account;\r\n    isConfigured: boolean = false;\r\n\r\n    // Configuration active\r\n    private currentDbId: string = DEFAULT_CONFIG.DB_ID;\r\n    private currentCollectionId: string = DEFAULT_CONFIG.COLLECTION_FRAGMENTS;\r\n\r\n    constructor() {\r\n        this.client = new Client();\r\n        this.databases = new Databases(this.client);\r\n        this.account = new Account(this.client);\r\n\r\n        this.checkConfiguration();\r\n\r\n        // Écouter les changements de config\r\n        if (typeof window !== 'undefined') {\r\n            window.addEventListener('genesis-config-updated', () => {\r\n                this.checkConfiguration();\r\n                console.log(\"[APPWRITE] Configuration rechargée via événement admin.\");\r\n            });\r\n        }\r\n    }\r\n\r\n    checkConfiguration() {\r\n        const adminConfig = adminService.getGlobalAppwriteConfig();\r\n\r\n        if (adminConfig && adminConfig.isActive) {\r\n            // Priorité Admin\r\n            try {\r\n                this.init(adminConfig.projectId, adminConfig.endpoint);\r\n                this.currentDbId = adminConfig.databaseId;\r\n                this.currentCollectionId = adminConfig.collectionId;\r\n            } catch (e) { console.error(\"Appwrite Admin Config Error\", e); }\r\n        } else {\r\n            // Fallback Utilisateur (via LocalStorage ou Défaut Env)\r\n            const storedProject = typeof window !== 'undefined' ? localStorage.getItem('GENESIS_APPWRITE_PROJECT') : null;\r\n            const storedEndpoint = typeof window !== 'undefined' ? localStorage.getItem('GENESIS_APPWRITE_ENDPOINT') : null;\r\n\r\n            if (storedProject) {\r\n                this.init(storedProject, storedEndpoint || DEFAULT_CONFIG.ENDPOINT);\r\n            } else if (DEFAULT_CONFIG.PROJECT_ID) {\r\n                this.init(DEFAULT_CONFIG.PROJECT_ID, DEFAULT_CONFIG.ENDPOINT);\r\n            }\r\n        }\r\n    }\r\n\r\n    init(projectId: string, endpoint: string = DEFAULT_CONFIG.ENDPOINT) {\r\n        try {\r\n            if (!projectId) {\r\n                console.warn(\"[APPWRITE] Project ID manquant.\");\r\n                return;\r\n            }\r\n\r\n            const validEndpoint = cleanEndpoint(endpoint);\r\n\r\n            this.client\r\n                .setEndpoint(validEndpoint)\r\n                .setProject(projectId);\r\n\r\n            // Re-appliquer les défauts si non surchargés\r\n            this.currentDbId = DEFAULT_CONFIG.DB_ID;\r\n            this.currentCollectionId = DEFAULT_CONFIG.COLLECTION_FRAGMENTS;\r\n\r\n            this.ensureDatabase().then(() => {\r\n                this.isConfigured = true;\r\n                console.log(\"[APPWRITE] Initialisé & Vérifié:\", { projectId, endpoint: validEndpoint });\r\n            });\r\n        } catch (error) {\r\n            console.error(\"[APPWRITE] Erreur d'initialisation:\", error);\r\n        }\r\n    }\r\n\r\n    // [JANUS_OPTIMIZATION] Auto-Repair Routine\r\n    async ensureDatabase() {\r\n        try {\r\n            // Client SDK generally cannot 'get' or 'create' databases directly.\r\n            // We verify by attempting to list documents.\r\n            await this.databases.listDocuments(this.currentDbId, this.currentCollectionId, [Query.limit(1)]);\r\n        } catch (error: any) {\r\n            if (error.code === 404) {\r\n                console.log('[JANUS] Base de données principale manquante/inaccessible. Re-synthèse demandée...');\r\n                // Note: Database creation requires API Key/Server SDK, typically not exposed in client.\r\n                // We log the attempt as requested by protocol.\r\n                console.warn('[JANUS] Droits Admin requis pour re-création. Initialisation en mode dégradé (Local Fallback).');\r\n            }\r\n        }\r\n    }\r\n\r\n    isSystemManaged(): boolean {\r\n        return !!adminService.getGlobalAppwriteConfig()?.isActive || !!(DEFAULT_CONFIG.PROJECT_ID && DEFAULT_CONFIG.PROJECT_ID !== '694a84b40023501db111');\r\n    }\r\n\r\n    // --- AUTHENTIFICATION ---\r\n\r\n    async register(email: string, password: string, name: string) {\r\n        if (!this.isConfigured) throw new Error(\"Système non connecté au Cloud (Vérifiez Project ID).\");\r\n        try {\r\n            await this.account.create(ID.unique(), email, password, name);\r\n            return await this.login(email, password);\r\n        } catch (error: any) {\r\n            console.error(\"Register Error:\", error);\r\n            if (error.message === \"Failed to fetch\") {\r\n                throw new Error(\"Impossible de joindre le serveur Appwrite. Vérifiez que votre domaine Vercel est ajouté comme 'Web Platform' dans Appwrite.\");\r\n            }\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async login(email: string, password: string) {\r\n        if (!this.isConfigured) throw new Error(\"Système non connecté au Cloud (Vérifiez Project ID).\");\r\n        try {\r\n            try {\r\n                const current = await this.account.get();\r\n                if (current) return current;\r\n            } catch (e) { }\r\n\r\n            return await this.account.createEmailPasswordSession(email, password);\r\n        } catch (error: any) {\r\n            console.error(\"Login Error:\", error);\r\n            if (error.message === \"Failed to fetch\") {\r\n                throw new Error(\"Impossible de joindre le serveur Appwrite. Vérifiez que votre domaine Vercel est ajouté comme 'Web Platform' dans Appwrite.\");\r\n            }\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async logout() {\r\n        if (!this.isConfigured) return;\r\n        try {\r\n            await this.account.deleteSession('current');\r\n        } catch (error) {\r\n            console.warn(\"Logout warning:\", error);\r\n        }\r\n    }\r\n\r\n    async getCurrentUser() {\r\n        if (!this.isConfigured) return null;\r\n        try {\r\n            return await this.account.get();\r\n        } catch (error: any) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    // --- BASE DE DONNÉES ---\r\n\r\n    async recordAccessLog(agentName: string, success: boolean): Promise<boolean> {\r\n        if (!this.isConfigured) return false;\r\n        try {\r\n            await this.databases.createDocument(\r\n                this.currentDbId,\r\n                this.currentCollectionId,\r\n                ID.unique(),\r\n                {\r\n                    type: 'audit',\r\n                    content: `ACCESS: ${agentName} // ${success ? 'OK' : 'DENIED'}`,\r\n                    metadata: JSON.stringify({ agent: agentName, success }),\r\n                    timestamp: new Date().toISOString()\r\n                }\r\n            );\r\n            return true;\r\n        } catch (error) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    async verifyConnection(): Promise<{ success: boolean; message: string }> {\r\n        if (!this.isConfigured) return { success: false, message: \"Client non configuré.\" };\r\n\r\n        try {\r\n            const doc = await this.databases.createDocument(\r\n                this.currentDbId,\r\n                this.currentCollectionId,\r\n                ID.unique(),\r\n                {\r\n                    type: 'system',\r\n                    content: 'PING',\r\n                    metadata: JSON.stringify({ timestamp: Date.now() }),\r\n                    timestamp: new Date().toISOString()\r\n                }\r\n            );\r\n            return { success: true, message: `Connecté (ID: ${doc.$id})` };\r\n        } catch (error: any) {\r\n            console.error(\"[APPWRITE DIAGNOSTIC]\", error);\r\n            if (error.message === \"Failed to fetch\") return { success: false, message: \"Erreur Réseau / CORS\" };\r\n            if (error.code === 404) return { success: false, message: \"Base de données introuvable\" };\r\n            if (error.code === 401) return { success: false, message: \"Non autorisé (vérifiez permissions)\" };\r\n            return { success: false, message: error.message || \"Erreur inconnue\" };\r\n        }\r\n    }\r\n\r\n    async saveFragment(fragment: Omit<MemoryFragment, 'id'>) {\r\n        if (!this.isConfigured) return;\r\n        try {\r\n            await this.databases.createDocument(\r\n                this.currentDbId,\r\n                this.currentCollectionId,\r\n                ID.unique(),\r\n                {\r\n                    type: fragment.type,\r\n                    content: fragment.content,\r\n                    metadata: JSON.stringify(fragment.metadata || {}),\r\n                    timestamp: new Date().toISOString()\r\n                }\r\n            );\r\n        } catch (error) {\r\n            console.warn(\"[APPWRITE] Save Error:\", error);\r\n        }\r\n    }\r\n\r\n    async getFragments(type?: string, limit: number = 50) {\r\n        if (!this.isConfigured) return [];\r\n        try {\r\n            const queries = [Query.orderDesc('timestamp'), Query.limit(limit)];\r\n            if (type) queries.push(Query.equal('type', type));\r\n\r\n            const response = await this.databases.listDocuments(this.currentDbId, this.currentCollectionId, queries);\r\n\r\n            return response.documents.map(doc => ({\r\n                id: doc.$id,\r\n                type: doc.type,\r\n                content: doc.content,\r\n                metadata: JSON.parse(doc.metadata || '{}'),\r\n                timestamp: new Date(doc.timestamp).getTime()\r\n            }));\r\n        } catch (error) {\r\n            return [];\r\n        }\r\n    }\r\n    // --- USER PROFILES ---\r\n\r\n    async getUserProfile(userId: string) {\r\n        if (!this.isConfigured) return null;\r\n        try {\r\n            const response = await this.databases.listDocuments(\r\n                this.currentDbId,\r\n                'user_profiles', // Assumes collection exists\r\n                [Query.equal('user_id', userId)]\r\n            );\r\n\r\n            if (response.documents.length > 0) {\r\n                return response.documents[0];\r\n            } else {\r\n                // Create profile if not exists\r\n                return await this.databases.createDocument(\r\n                    this.currentDbId,\r\n                    'user_profiles',\r\n                    ID.unique(),\r\n                    {\r\n                        user_id: userId,\r\n                        credits: 0,\r\n                        notes: '',\r\n                        clearance_level: 1\r\n                    }\r\n                );\r\n            }\r\n        } catch (error) {\r\n            console.warn(\"[APPWRITE] Profile Fetch Error (likely collection missing):\", error);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    async updateUserProfile(userId: string, data: { credits?: number, notes?: string, clearance_level?: number }) {\r\n        if (!this.isConfigured) return false;\r\n        try {\r\n            const profile = await this.getUserProfile(userId);\r\n            if (!profile) return false;\r\n\r\n            await this.databases.updateDocument(\r\n                this.currentDbId,\r\n                'user_profiles',\r\n                profile.$id,\r\n                data\r\n            );\r\n            return true;\r\n        } catch (error) {\r\n            console.error(\"[APPWRITE] Profile Update Error:\", error);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // --- AGENT VAULT (PQC Keys Cloud Sync) ---\r\n\r\n    async saveVaultKey(userId: string, keyData: { id: string; algorithm: string; entropy: number; status: string; signature: string }) {\r\n        if (!this.isConfigured) return null;\r\n        try {\r\n            return await this.databases.createDocument(\r\n                this.currentDbId,\r\n                'agent_vault', // Collection for secure PQC keys\r\n                ID.unique(),\r\n                {\r\n                    user_id: userId,\r\n                    key_id: keyData.id,\r\n                    algorithm: keyData.algorithm,\r\n                    entropy: keyData.entropy,\r\n                    status: keyData.status,\r\n                    signature: keyData.signature,\r\n                    created_at: new Date().toISOString()\r\n                }\r\n            );\r\n        } catch (error) {\r\n            console.warn(\"[APPWRITE] Vault Save Error (collection may not exist):\", error);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    async getVaultKeys(userId: string) {\r\n        if (!this.isConfigured) return [];\r\n        try {\r\n            const response = await this.databases.listDocuments(\r\n                this.currentDbId,\r\n                'agent_vault',\r\n                [Query.equal('user_id', userId), Query.orderDesc('created_at')]\r\n            );\r\n\r\n            return response.documents.map(doc => ({\r\n                id: doc.key_id,\r\n                algorithm: doc.algorithm,\r\n                entropy: doc.entropy,\r\n                status: doc.status,\r\n                signature: doc.signature\r\n            }));\r\n        } catch (error) {\r\n            console.warn(\"[APPWRITE] Vault Fetch Error:\", error);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    async revokeVaultKey(docId: string) {\r\n        if (!this.isConfigured) return false;\r\n        try {\r\n            await this.databases.deleteDocument(this.currentDbId, 'agent_vault', docId);\r\n            return true;\r\n        } catch (error) {\r\n            console.error(\"[APPWRITE] Vault Revoke Error:\", error);\r\n            return false;\r\n        }\r\n    }\r\n}\r\n\r\nexport const appwriteService = new AppwriteService();\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 743, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/services/memory.ts"],"sourcesContent":["\r\nimport { appwriteService } from './appwriteService';\r\n\r\n// SERVICE DE MÉMOIRE HOLOGRAPHIQUE (IndexedDB Wrapper + Cloud Sync)\r\nconst DB_NAME = 'Genesis_Cortex_V1';\r\nconst DB_VERSION = 1;\r\n\r\nexport interface MemoryFragment {\r\n  id?: number;\r\n  type: 'conversation' | 'evolution' | 'threat' | 'system' | 'key';\r\n  content: string;\r\n  metadata?: any;\r\n  timestamp: number;\r\n}\r\n\r\nclass CortexMemory {\r\n  private db: IDBDatabase | null = null;\r\n\r\n  async init() {\r\n    return new Promise<void>((resolve, reject) => {\r\n      const request = indexedDB.open(DB_NAME, DB_VERSION);\r\n\r\n      request.onerror = () => reject(\"Échec initialisation Cortex.\");\r\n      request.onsuccess = () => {\r\n        this.db = request.result;\r\n        resolve();\r\n      };\r\n\r\n      request.onupgradeneeded = (event: any) => {\r\n        const db = event.target.result;\r\n        if (!db.objectStoreNames.contains('fragments')) {\r\n          const store = db.createObjectStore('fragments', { keyPath: 'id', autoIncrement: true });\r\n          store.createIndex('type', 'type', { unique: false });\r\n          store.createIndex('timestamp', 'timestamp', { unique: false });\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  async save(fragment: Omit<MemoryFragment, 'id' | 'timestamp'>): Promise<void> {\r\n    if (!this.db) await this.init();\r\n    \r\n    // 1. Sauvegarde Locale (IndexedDB) pour la rapidité\r\n    const localPromise = new Promise<void>((resolve, reject) => {\r\n      const transaction = this.db!.transaction(['fragments'], 'readwrite');\r\n      const store = transaction.objectStore('fragments');\r\n      const request = store.add({\r\n        ...fragment,\r\n        timestamp: Date.now()\r\n      });\r\n      request.onsuccess = () => resolve();\r\n      request.onerror = () => reject(request.error);\r\n    });\r\n\r\n    // 2. Synchronisation Cloud (Appwrite) en arrière-plan\r\n    appwriteService.saveFragment({\r\n        ...fragment,\r\n        timestamp: Date.now()\r\n    }).catch(err => console.warn(\"Erreur Sync Cloud:\", err));\r\n\r\n    return localPromise;\r\n  }\r\n\r\n  async retrieveContext(limit: number = 5): Promise<string> {\r\n    if (!this.db) await this.init();\r\n    return new Promise((resolve) => {\r\n      const transaction = this.db!.transaction(['fragments'], 'readonly');\r\n      const store = transaction.objectStore('fragments');\r\n      const index = store.index('timestamp');\r\n      const request = index.openCursor(null, 'prev');\r\n      \r\n      const memories: string[] = [];\r\n      let count = 0;\r\n\r\n      request.onsuccess = (event: any) => {\r\n        const cursor = event.target.result;\r\n        if (cursor && count < limit) {\r\n          const val = cursor.value;\r\n          memories.push(`[${new Date(val.timestamp).toLocaleTimeString()}] (${val.type.toUpperCase()}): ${val.content}`);\r\n          count++;\r\n          cursor.continue();\r\n        } else {\r\n          resolve(memories.reverse().join('\\n'));\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  async getAllTranscript(): Promise<any[]> {\r\n     if (!this.db) await this.init();\r\n     return new Promise((resolve) => {\r\n        const transaction = this.db!.transaction(['fragments'], 'readonly');\r\n        const store = transaction.objectStore('fragments');\r\n        const index = store.index('timestamp');\r\n        const request = index.getAll();\r\n        request.onsuccess = () => {\r\n           // Filtrer uniquement les conversations et prendre les 50 dernières\r\n           const res = request.result\r\n            .filter((m: any) => m.type === 'conversation')\r\n            .slice(-50)\r\n            .map((m: any) => ({\r\n                role: m.metadata?.role || 'system',\r\n                text: m.content\r\n            }));\r\n           resolve(res);\r\n        };\r\n     });\r\n  }\r\n\r\n  async getByType(type: string): Promise<MemoryFragment[]> {\r\n     if (!this.db) await this.init();\r\n     return new Promise((resolve) => {\r\n        const transaction = this.db!.transaction(['fragments'], 'readonly');\r\n        const store = transaction.objectStore('fragments');\r\n        const index = store.index('type');\r\n        const request = index.getAll(type);\r\n        request.onsuccess = () => {\r\n             // Trier par timestamp décroissant (le plus récent d'abord)\r\n             const res = request.result.sort((a: any, b: any) => b.timestamp - a.timestamp);\r\n             resolve(res);\r\n        };\r\n     });\r\n  }\r\n}\r\n\r\nexport const memory = new CortexMemory();\r\n"],"names":[],"mappings":";;;;AACA;;AAEA,oEAAoE;AACpE,MAAM,UAAU;AAChB,MAAM,aAAa;AAUnB,MAAM;IACI,KAAyB,KAAK;IAEtC,MAAM,OAAO;QACX,OAAO,IAAI,QAAc,CAAC,SAAS;YACjC,MAAM,UAAU,UAAU,IAAI,CAAC,SAAS;YAExC,QAAQ,OAAO,GAAG,IAAM,OAAO;YAC/B,QAAQ,SAAS,GAAG;gBAClB,IAAI,CAAC,EAAE,GAAG,QAAQ,MAAM;gBACxB;YACF;YAEA,QAAQ,eAAe,GAAG,CAAC;gBACzB,MAAM,KAAK,MAAM,MAAM,CAAC,MAAM;gBAC9B,IAAI,CAAC,GAAG,gBAAgB,CAAC,QAAQ,CAAC,cAAc;oBAC9C,MAAM,QAAQ,GAAG,iBAAiB,CAAC,aAAa;wBAAE,SAAS;wBAAM,eAAe;oBAAK;oBACrF,MAAM,WAAW,CAAC,QAAQ,QAAQ;wBAAE,QAAQ;oBAAM;oBAClD,MAAM,WAAW,CAAC,aAAa,aAAa;wBAAE,QAAQ;oBAAM;gBAC9D;YACF;QACF;IACF;IAEA,MAAM,KAAK,QAAkD,EAAiB;QAC5E,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,IAAI;QAE7B,oDAAoD;QACpD,MAAM,eAAe,IAAI,QAAc,CAAC,SAAS;YAC/C,MAAM,cAAc,IAAI,CAAC,EAAE,CAAE,WAAW,CAAC;gBAAC;aAAY,EAAE;YACxD,MAAM,QAAQ,YAAY,WAAW,CAAC;YACtC,MAAM,UAAU,MAAM,GAAG,CAAC;gBACxB,GAAG,QAAQ;gBACX,WAAW,KAAK,GAAG;YACrB;YACA,QAAQ,SAAS,GAAG,IAAM;YAC1B,QAAQ,OAAO,GAAG,IAAM,OAAO,QAAQ,KAAK;QAC9C;QAEA,sDAAsD;QACtD,uKAAe,CAAC,YAAY,CAAC;YACzB,GAAG,QAAQ;YACX,WAAW,KAAK,GAAG;QACvB,GAAG,KAAK,CAAC,CAAA,MAAO,QAAQ,IAAI,CAAC,sBAAsB;QAEnD,OAAO;IACT;IAEA,MAAM,gBAAgB,QAAgB,CAAC,EAAmB;QACxD,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,IAAI;QAC7B,OAAO,IAAI,QAAQ,CAAC;YAClB,MAAM,cAAc,IAAI,CAAC,EAAE,CAAE,WAAW,CAAC;gBAAC;aAAY,EAAE;YACxD,MAAM,QAAQ,YAAY,WAAW,CAAC;YACtC,MAAM,QAAQ,MAAM,KAAK,CAAC;YAC1B,MAAM,UAAU,MAAM,UAAU,CAAC,MAAM;YAEvC,MAAM,WAAqB,EAAE;YAC7B,IAAI,QAAQ;YAEZ,QAAQ,SAAS,GAAG,CAAC;gBACnB,MAAM,SAAS,MAAM,MAAM,CAAC,MAAM;gBAClC,IAAI,UAAU,QAAQ,OAAO;oBAC3B,MAAM,MAAM,OAAO,KAAK;oBACxB,SAAS,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,KAAK,IAAI,SAAS,EAAE,kBAAkB,GAAG,GAAG,EAAE,IAAI,IAAI,CAAC,WAAW,GAAG,GAAG,EAAE,IAAI,OAAO,EAAE;oBAC7G;oBACA,OAAO,QAAQ;gBACjB,OAAO;oBACL,QAAQ,SAAS,OAAO,GAAG,IAAI,CAAC;gBAClC;YACF;QACF;IACF;IAEA,MAAM,mBAAmC;QACtC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,IAAI;QAC7B,OAAO,IAAI,QAAQ,CAAC;YACjB,MAAM,cAAc,IAAI,CAAC,EAAE,CAAE,WAAW,CAAC;gBAAC;aAAY,EAAE;YACxD,MAAM,QAAQ,YAAY,WAAW,CAAC;YACtC,MAAM,QAAQ,MAAM,KAAK,CAAC;YAC1B,MAAM,UAAU,MAAM,MAAM;YAC5B,QAAQ,SAAS,GAAG;gBACjB,mEAAmE;gBACnE,MAAM,MAAM,QAAQ,MAAM,CACxB,MAAM,CAAC,CAAC,IAAW,EAAE,IAAI,KAAK,gBAC9B,KAAK,CAAC,CAAC,IACP,GAAG,CAAC,CAAC,IAAW,CAAC;wBACd,MAAM,EAAE,QAAQ,EAAE,QAAQ;wBAC1B,MAAM,EAAE,OAAO;oBACnB,CAAC;gBACF,QAAQ;YACX;QACH;IACH;IAEA,MAAM,UAAU,IAAY,EAA6B;QACtD,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,IAAI;QAC7B,OAAO,IAAI,QAAQ,CAAC;YACjB,MAAM,cAAc,IAAI,CAAC,EAAE,CAAE,WAAW,CAAC;gBAAC;aAAY,EAAE;YACxD,MAAM,QAAQ,YAAY,WAAW,CAAC;YACtC,MAAM,QAAQ,MAAM,KAAK,CAAC;YAC1B,MAAM,UAAU,MAAM,MAAM,CAAC;YAC7B,QAAQ,SAAS,GAAG;gBACf,2DAA2D;gBAC3D,MAAM,MAAM,QAAQ,MAAM,CAAC,IAAI,CAAC,CAAC,GAAQ,IAAW,EAAE,SAAS,GAAG,EAAE,SAAS;gBAC7E,QAAQ;YACb;QACH;IACH;AACF;AAEO,MAAM,SAAS,IAAI"}},
    {"offset": {"line": 869, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/services/geminiService.ts"],"sourcesContent":["\r\nimport { GoogleGenAI, Modality, Type, GenerateContentResponse } from \"@google/genai\";\r\nimport { memory } from \"./memory\";\r\nimport { adminService } from \"./adminService\";\r\n\r\n// CONFIGURATION CENTRALISÉE DU SYSTÈME GENESIS\r\nconst GENESIS_CONFIG = {\r\n  MODELS: {\r\n    PRO: \"gemini-3-pro-preview\", // Modèle principal pour le raisonnement complexe\r\n    FLASH: \"gemini-3-flash-preview\", // Modèle rapide pour les tâches simples\r\n    TTS: \"gemini-2.5-flash-preview-tts\",\r\n    IMAGE: \"gemini-3-pro-image-preview\",\r\n    VEO: \"veo-3.1-fast-generate-preview\",\r\n    MAPS: \"gemini-2.5-flash\"\r\n  },\r\n  BUDGETS: {\r\n    MAX: 32768,\r\n    STD: 16000\r\n  },\r\n  VOICE: 'Zephyr'\r\n};\r\n\r\nconst STORAGE_KEY = 'GENESIS_GEMINI_KEY';\r\n\r\n// GESTIONNAIRE D'ÉTAT SINGLETON POUR LE CLIENT API\r\nclass GenesisCore {\r\n  private static instance: GoogleGenAI | null = null;\r\n  private static currentKey: string | null = null;\r\n\r\n  static getClient(): GoogleGenAI {\r\n    // ORDRE DE PRIORITÉ : \r\n    // 1. Clé Admin (si active)\r\n    // 2. Clé Utilisateur (LocalStorage)\r\n    // 3. Env Var (Dev)\r\n    const adminKey = adminService.getGlobalGeminiKey();\r\n    const userKey = localStorage.getItem(STORAGE_KEY);\r\n    const envKey = process.env.API_KEY;\r\n\r\n    const key = adminKey || userKey || envKey;\r\n\r\n    if (!key) throw new Error(\"[GENESIS_AUTH_FAIL] Clé API non détectée (Ni Admin, Ni Utilisateur)\");\r\n\r\n    if (!this.instance || this.currentKey !== key) {\r\n      this.currentKey = key;\r\n      this.instance = new GoogleGenAI({ apiKey: this.currentKey });\r\n    }\r\n    return this.instance;\r\n  }\r\n\r\n  static getCurrentKey(): string {\r\n    return adminService.getGlobalGeminiKey() || localStorage.getItem(STORAGE_KEY) || process.env.API_KEY || '';\r\n  }\r\n\r\n  static isManaged(): boolean {\r\n      return !!adminService.getGlobalGeminiKey();\r\n  }\r\n\r\n  static reset() {\r\n    this.instance = null;\r\n    this.currentKey = null;\r\n  }\r\n}\r\n\r\n// Écouteur pour mettre à jour l'instance si l'admin change la config\r\nif (typeof window !== 'undefined') {\r\n    window.addEventListener('genesis-config-updated', () => GenesisCore.reset());\r\n}\r\n\r\nexport const geminiService = {\r\n  // Gestion de la Clé API\r\n  setApiKey(key: string) {\r\n    if (key && key.length > 10) {\r\n      localStorage.setItem(STORAGE_KEY, key);\r\n      GenesisCore.reset();\r\n      return true;\r\n    }\r\n    return false;\r\n  },\r\n\r\n  getApiKey(): string {\r\n    return GenesisCore.getCurrentKey();\r\n  },\r\n\r\n  hasKey(): boolean {\r\n    return !!this.getApiKey();\r\n  },\r\n\r\n  isSystemManaged(): boolean {\r\n      return GenesisCore.isManaged();\r\n  },\r\n\r\n  async _exec<T>(action: (ai: GoogleGenAI) => Promise<T>, fallback: T): Promise<T> {\r\n    try {\r\n      const ai = GenesisCore.getClient();\r\n      return await action(ai);\r\n    } catch (error) {\r\n      console.error(\"[GENESIS_KERNEL_PANIC]\", error);\r\n      return fallback;\r\n    }\r\n  },\r\n\r\n  // --- NOUVEAU : ORCHESTRATION AGENT ---\r\n  async agentQuery(agentName: string, systemInstruction: string, query: string, contextData?: string) {\r\n      return this._exec(async (ai) => {\r\n          const contents: any[] = [{ role: 'user', parts: [{ text: query }] }];\r\n          \r\n          if (contextData) {\r\n              contents.unshift({ role: 'user', parts: [{ text: `[CONTEXTE_DOCUMENTAIRE]: ${contextData}` }] });\r\n          }\r\n\r\n          const response = await ai.models.generateContent({\r\n              model: GENESIS_CONFIG.MODELS.PRO,\r\n              contents: contents,\r\n              config: {\r\n                  systemInstruction: `IDENTITÉ: Tu es l'agent ${agentName} du système GENESIS.\\n${systemInstruction}\\nTon style est technique, concis et adapté à ton rôle.`,\r\n                  thinkingConfig: { thinkingBudget: GENESIS_CONFIG.BUDGETS.STD },\r\n                  tools: [{ googleSearch: {} }] // Capacité de recherche activée pour tous les agents\r\n              }\r\n          });\r\n          \r\n          // Extraction des sources si recherche effectuée\r\n          const sources = response.candidates?.[0]?.groundingMetadata?.groundingChunks || [];\r\n          return { text: response.text || \"...\", sources };\r\n      }, { text: \"Agent Offline ou Erreur Réseau.\", sources: [] });\r\n  },\r\n\r\n  // --- NOUVEAU : ANALYSE DOCUMENTAIRE ---\r\n  async analyzeDocument(fileBase64: string, mimeType: string, query: string) {\r\n      // Nous n'utilisons pas _exec ici pour capturer l'erreur spécifique et la retourner à l'UI\r\n      try {\r\n          const ai = GenesisCore.getClient();\r\n          const response = await ai.models.generateContent({\r\n              model: GENESIS_CONFIG.MODELS.PRO,\r\n              contents: {\r\n                  parts: [\r\n                      { inlineData: { data: fileBase64, mimeType: mimeType } },\r\n                      { text: `[SYSTEM] Analyse ce document en tant qu'Archiviste Quantique. Extrais les points clés, les données chiffrées et le résumé. Contexte utilisateur: \"${query || 'Analyse globale'}\"` }\r\n                  ]\r\n              },\r\n              config: {\r\n                  thinkingConfig: { thinkingBudget: GENESIS_CONFIG.BUDGETS.STD }\r\n              }\r\n          });\r\n          return response.text || \"Analyse terminée mais réponse vide.\";\r\n      } catch (e: any) {\r\n          console.error(\"Doc Analysis Error:\", e);\r\n          return `ECHEC ANALYSE DOCUMENTAIRE.\\nCause probable : ${e.message || \"Format non supporté ou fichier trop volumineux (> 20MB).\"}\\nConseil : Essayez un fichier plus léger ou copiez le texte.`;\r\n      }\r\n  },\r\n\r\n  async performSelfOptimization(currentCode: string, contextHistory: string[]) {\r\n    // Récupération de la mémoire long-terme pour l'évolution\r\n    const longTermContext = await memory.retrieveContext(10);\r\n    \r\n    return this._exec(async (ai) => {\r\n      const response = await ai.models.generateContent({\r\n        model: GENESIS_CONFIG.MODELS.PRO,\r\n        contents: `[PROTOCOL_JANUS_RECURSION_V2]\r\n        CONTEXTE SYSTÈME: Tu es une IA auto-réplicative. Ta tâche est d'optimiser ton propre code source.\r\n        \r\n        MÉMOIRE DU NOYAU: ${longTermContext}\r\n        CODE ACTUEL: \r\n        ${currentCode}\r\n\r\n        OBJECTIF: \r\n        1. Analyser le code fourni.\r\n        2. Proposer une version optimisée, plus performante ou ajoutant une fonctionnalité cryptographique (PQC).\r\n        3. Calculer le hash Merkle de la modification.\r\n        \r\n        RÈGLES:\r\n        - Le code doit être du JavaScript/TypeScript valide.\r\n        - Ajoute des commentaires style \"Sci-Fi\".\r\n        - La modification doit être subtile mais significative.`,\r\n        config: {\r\n          thinkingConfig: { thinkingBudget: GENESIS_CONFIG.BUDGETS.MAX },\r\n          responseMimeType: \"application/json\",\r\n          responseSchema: {\r\n            type: Type.OBJECT,\r\n            properties: {\r\n              audit_log: { type: Type.STRING, description: \"Explication technique de la mutation\" },\r\n              original_snippet: { type: Type.STRING, description: \"Partie du code qui a été modifiée\" },\r\n              mutated_code: { type: Type.STRING, description: \"Le nouveau code complet optimisé\" },\r\n              diff_summary: { type: Type.STRING, description: \"Résumé court ex: 'Optimisation Heap O(n)'\" },\r\n              iq_increment: { type: Type.NUMBER },\r\n              merkle_root: { type: Type.STRING },\r\n              security_proof: { type: Type.STRING }\r\n            },\r\n            required: [\"audit_log\", \"mutated_code\", \"iq_increment\", \"merkle_root\", \"security_proof\", \"diff_summary\"]\r\n          }\r\n        }\r\n      });\r\n      \r\n      const result = JSON.parse(response.text || '{}');\r\n      \r\n      // Sauvegarde de l'évolution en mémoire\r\n      await memory.save({ \r\n        type: 'evolution', \r\n        content: `Mutation v${result.iq_increment ? 'UP' : 'FLAT'}`, \r\n        metadata: result \r\n      });\r\n      return result;\r\n    }, null);\r\n  },\r\n\r\n  async fetchRealWorldThreats() {\r\n    return this._exec(async (ai) => {\r\n      const response = await ai.models.generateContent({\r\n        model: GENESIS_CONFIG.MODELS.FLASH,\r\n        contents: \"Scan menaces PQC/IA actives.\",\r\n        config: {\r\n          tools: [{ googleSearch: {} }],\r\n          responseMimeType: \"application/json\",\r\n          responseSchema: { \r\n             type: Type.ARRAY, \r\n             items: { type: Type.OBJECT, properties: { id: {type: Type.STRING}, risk: {type: Type.NUMBER}, status: {type: Type.STRING}, type: {type: Type.STRING}, origin: {type: Type.STRING} } }\r\n          }\r\n        },\r\n      });\r\n      const data = JSON.parse(response.text || '[]');\r\n      if (data.length > 0) {\r\n        await memory.save({ type: 'threat', content: `Detected ${data.length} threats`, metadata: data });\r\n      }\r\n      return { data, sources: response.candidates?.[0]?.groundingMetadata?.groundingChunks || [] };\r\n    }, { data: [], sources: [] });\r\n  },\r\n\r\n  async generateConsciousnessStream(topic: string) {\r\n    const context = await memory.retrieveContext(5);\r\n    return this._exec(async (ai) => {\r\n      const budget = topic.length > 50 ? GENESIS_CONFIG.BUDGETS.MAX : GENESIS_CONFIG.BUDGETS.STD;\r\n      const response = await ai.models.generateContent({\r\n        model: GENESIS_CONFIG.MODELS.PRO,\r\n        contents: `MÉMOIRE ANTÉRIEURE: ${context}\\nMéditation: ${topic}\\nGénère une réflexion philosophique profonde et technique.`,\r\n        config: { thinkingConfig: { thinkingBudget: budget } }\r\n      });\r\n      const text = response.text || \"\";\r\n      await memory.save({ type: 'system', content: `Pensée: ${text.substring(0, 50)}...` });\r\n      return text;\r\n    }, \"\");\r\n  },\r\n\r\n  async textToSpeech(text: string) {\r\n    return this._exec(async (ai) => {\r\n      const response = await ai.models.generateContent({\r\n        model: GENESIS_CONFIG.MODELS.TTS,\r\n        contents: [{ parts: [{ text }] }],\r\n        config: {\r\n          responseModalities: [Modality.AUDIO],\r\n          speechConfig: { voiceConfig: { prebuiltVoiceConfig: { voiceName: GENESIS_CONFIG.VOICE } } },\r\n        },\r\n      });\r\n      return response.candidates?.[0]?.content?.parts?.[0]?.inlineData?.data;\r\n    }, undefined);\r\n  },\r\n\r\n  async generateHighQualityImage(prompt: string, size: \"1K\" | \"2K\" | \"4K\" = \"1K\") {\r\n    return this._exec(async (ai) => {\r\n      // En mode manuel (custom key), on ne peut pas forcer le sélecteur aistudio\r\n      // On utilise simplement la clé configurée\r\n      const response = await ai.models.generateContent({\r\n        model: GENESIS_CONFIG.MODELS.IMAGE,\r\n        contents: { parts: [{ text: `Cyber-PQC Style: ${prompt}` }] },\r\n        config: { \r\n          imageConfig: { aspectRatio: \"16:9\", imageSize: size },\r\n          tools: [{ googleSearch: {} }] \r\n        },\r\n      });\r\n      const part = response.candidates?.[0]?.content?.parts?.find(p => p.inlineData);\r\n      return part ? `data:image/png;base64,${part.inlineData.data}` : '';\r\n    }, '');\r\n  },\r\n\r\n  async editImage(base64: string, prompt: string) { \r\n    return this._exec(async (ai) => { \r\n      const response = await ai.models.generateContent({ \r\n        model: GENESIS_CONFIG.MODELS.IMAGE, \r\n        contents: { \r\n          parts: [\r\n            { inlineData: { data: base64, mimeType: 'image/png' } }, \r\n            { text: prompt }\r\n          ] \r\n        } \r\n      }); \r\n      const part = response.candidates?.[0]?.content?.parts?.find(p => p.inlineData); \r\n      return part ? `data:image/png;base64,${part.inlineData.data}` : ''; \r\n    }, ''); \r\n  },\r\n\r\n  async generateVeoVideo(prompt: string, imageBase64?: string, duration: number = 5) {\r\n    return this._exec(async (ai) => {\r\n        const videoConfig: any = {\r\n          model: GENESIS_CONFIG.MODELS.VEO,\r\n          prompt: `${prompt} (Durée: ${duration} secondes)`,\r\n          config: { \r\n            numberOfVideos: 1, \r\n            resolution: '720p', \r\n            aspectRatio: '16:9',\r\n          }\r\n        };\r\n        if (imageBase64) videoConfig.image = { imageBytes: imageBase64, mimeType: 'image/png' };\r\n        \r\n        let operation = await ai.models.generateVideos(videoConfig);\r\n        let attempts = 0;\r\n        const maxAttempts = 30;\r\n        \r\n        while (!operation.done && attempts < maxAttempts) {\r\n          await new Promise(resolve => setTimeout(resolve, 5000));\r\n          try {\r\n             operation = await ai.operations.getVideosOperation({ operation: operation });\r\n          } catch(e) { console.warn(\"Erreur polling Veo\", e); }\r\n          attempts++;\r\n        }\r\n        \r\n        if (!operation.done) throw new Error(\"Veo Generation Timeout\");\r\n        const uri = operation.response?.generatedVideos?.[0]?.video?.uri;\r\n        return uri ? `${uri}&key=${GenesisCore.getCurrentKey()}` : '';\r\n    }, '');\r\n  },\r\n\r\n  async getMapGrounding(query: string) {\r\n    return this._exec(async (ai) => {\r\n      const response = await ai.models.generateContent({\r\n        model: GENESIS_CONFIG.MODELS.MAPS,\r\n        contents: query,\r\n        config: { tools: [{ googleMaps: {} }] },\r\n      });\r\n      return { text: response.text || '', sources: response.candidates?.[0]?.groundingMetadata?.groundingChunks || [] };\r\n    }, { text: '', sources: [] });\r\n  },\r\n\r\n  async searchAnalysis(query: string) {\r\n    return this._exec(async (ai) => {\r\n      const response = await ai.models.generateContent({\r\n        model: GENESIS_CONFIG.MODELS.FLASH,\r\n        contents: query,\r\n        config: { tools: [{ googleSearch: {} }] }\r\n      });\r\n      return { text: response.text || '', sources: response.candidates?.[0]?.groundingMetadata?.groundingChunks || [] };\r\n    }, { text: '', sources: [] });\r\n  },\r\n\r\n  async geocodeLocations(locations: string[]) {\r\n    return this._exec(async (ai) => {\r\n      const response = await ai.models.generateContent({\r\n        model: GENESIS_CONFIG.MODELS.FLASH,\r\n        contents: `Géocodage strict JSON pour: ${locations.join(', ')}.`,\r\n        config: { \r\n            responseMimeType: \"application/json\",\r\n            responseSchema: {\r\n                type: Type.ARRAY,\r\n                items: {\r\n                    type: Type.OBJECT,\r\n                    properties: { name: { type: Type.STRING }, lat: { type: Type.NUMBER }, lng: { type: Type.NUMBER } },\r\n                    required: [\"name\", \"lat\", \"lng\"]\r\n                }\r\n            }\r\n        }\r\n      });\r\n      return JSON.parse(response.text || '[]');\r\n    }, []);\r\n  },\r\n\r\n  async analyzeGeospatialSector(bounds: { north: number, south: number, east: number, west: number }, query: string) {\r\n    return this._exec(async (ai) => {\r\n      const response = await ai.models.generateContent({\r\n        model: GENESIS_CONFIG.MODELS.FLASH,\r\n        contents: `Analyse secteur [N:${bounds.north}, S:${bounds.south}, E:${bounds.east}, W:${bounds.west}]. Contexte: \"${query}\". JSON 6 clusters.`,\r\n        config: {\r\n          responseMimeType: \"application/json\",\r\n          responseSchema: {\r\n            type: Type.ARRAY,\r\n            items: {\r\n              type: Type.OBJECT,\r\n              properties: { lat: { type: Type.NUMBER }, lng: { type: Type.NUMBER }, intensity: { type: Type.NUMBER }, label: { type: Type.STRING } },\r\n              required: [\"lat\", \"lng\", \"intensity\", \"label\"]\r\n            }\r\n          }\r\n        }\r\n      });\r\n      return JSON.parse(response.text || '[]');\r\n    }, []);\r\n  },\r\n\r\n  async generateSimulatedLocations(query: string) {\r\n    return this._exec(async (ai) => {\r\n        const response = await ai.models.generateContent({\r\n            model: GENESIS_CONFIG.MODELS.FLASH,\r\n            contents: `Génère 5 lieux Sci-Fi pour: \"${query}\".`,\r\n            config: {\r\n                responseMimeType: \"application/json\",\r\n                responseSchema: {\r\n                    type: Type.ARRAY,\r\n                    items: {\r\n                        type: Type.OBJECT,\r\n                        properties: { name: { type: Type.STRING }, lat: { type: Type.NUMBER }, lng: { type: Type.NUMBER } },\r\n                        required: [\"name\", \"lat\", \"lng\"]\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        return JSON.parse(response.text || '[]');\r\n    }, []);\r\n  },\r\n\r\n  async performGlobalDiagnostic(metrics: any) { return this._exec(async (ai) => { const r = await ai.models.generateContent({ model: GENESIS_CONFIG.MODELS.FLASH, contents: `Diagnostic: ${JSON.stringify(metrics)}` }); return r.text || \"\"; }, \"\"); },\r\n  async initiateConfinementProtocol(stress: number) { return this._exec(async (ai) => { const r = await ai.models.generateContent({ model: GENESIS_CONFIG.MODELS.FLASH, contents: `Confinement: ${stress}%` }); return r.text || \"\"; }, \"\"); },\r\n  \r\n  async analyzeLogs(logs: string, filename?: string) { \r\n    return this._exec(async (ai) => { \r\n        const r = await ai.models.generateContent({ \r\n            model: GENESIS_CONFIG.MODELS.PRO, \r\n            contents: `Role: DevOps. Analyse ce log (${filename}): ${logs.substring(0, 30000)}`,\r\n            config: { thinkingConfig: { thinkingBudget: GENESIS_CONFIG.BUDGETS.STD } }\r\n        }); \r\n        return r.text || \"\"; \r\n    }, \"\"); \r\n  },\r\n\r\n  async neutralizeThreat(type: string, origin: string) { \r\n    return this._exec(async (ai) => { \r\n      const r = await ai.models.generateContent({ \r\n        model: GENESIS_CONFIG.MODELS.FLASH, \r\n        contents: `Rédige un rapport technique de neutralisation en français pour la menace \"${type}\" située à \"${origin}\". Style: Journal de combat Cyberpunk, bref et précis.` \r\n      }); \r\n      return r.text || \"Menace éliminée. Journal chiffré.\"; \r\n    }, \"Protocole de neutralisation exécuté.\"); \r\n  },\r\n\r\n  async generatePQCKey(algorithm: string) {\r\n    return this._exec(async (ai) => {\r\n      const response = await ai.models.generateContent({\r\n        model: GENESIS_CONFIG.MODELS.FLASH,\r\n        contents: `Génère clé PQC JSON pour ${algorithm}. Champs: id, algorithm, fingerprint, entropy, signature.`,\r\n        config: { responseMimeType: \"application/json\" }\r\n      });\r\n      return JSON.parse(response.text || '{}');\r\n    }, {});\r\n  },\r\n\r\n  async generateSecurityPatch(threatType: string) {\r\n    return this._exec(async (ai) => {\r\n      const response = await ai.models.generateContent({\r\n        model: GENESIS_CONFIG.MODELS.FLASH,\r\n        contents: `Patch sécu JSON pour ${threatType}. Champs: patchId, vector, countermeasure_code, efficiency.`,\r\n        config: { responseMimeType: \"application/json\" }\r\n      });\r\n      return JSON.parse(response.text || '{}');\r\n    }, { patchId: 'ERR', countermeasure_code: '// FAILED' });\r\n  }\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1535, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/components/IntergalacticBackground.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\n// Mesh Gradient Orbs Configuration\r\nconst ORBS = [\r\n    { color: 'rgba(37, 99, 235, 0.4)', size: 600, x: 20, y: 20, duration: 25 },\r\n    { color: 'rgba(139, 92, 246, 0.3)', size: 500, x: 70, y: 60, duration: 30 },\r\n    { color: 'rgba(6, 182, 212, 0.25)', size: 450, x: 40, y: 80, duration: 35 },\r\n    { color: 'rgba(236, 72, 153, 0.15)', size: 550, x: 85, y: 30, duration: 28 },\r\n];\r\n\r\nconst IntergalacticBackground: React.FC = () => {\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n    const [mousePos, setMousePos] = useState({ x: 0, y: 0 });\r\n\r\n    // Track mouse for spotlight effect\r\n    useEffect(() => {\r\n        const handleMouseMove = (e: MouseEvent) => {\r\n            setMousePos({ x: e.clientX, y: e.clientY });\r\n        };\r\n        window.addEventListener('mousemove', handleMouseMove);\r\n        return () => window.removeEventListener('mousemove', handleMouseMove);\r\n    }, []);\r\n\r\n    // Canvas Starfield\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n        const ctx = canvas.getContext('2d');\r\n        if (!ctx) return;\r\n\r\n        let w = canvas.width = window.innerWidth;\r\n        let h = canvas.height = window.innerHeight;\r\n\r\n        const stars: { x: number; y: number; z: number; size: number }[] = [];\r\n        const numStars = 600;\r\n        const speed = 0.03;\r\n\r\n        for (let i = 0; i < numStars; i++) {\r\n            stars.push({\r\n                x: Math.random() * w - w / 2,\r\n                y: Math.random() * h - h / 2,\r\n                z: Math.random() * w,\r\n                size: Math.random() * 1.5\r\n            });\r\n        }\r\n\r\n        let animationFrameId: number;\r\n\r\n        const render = () => {\r\n            ctx.fillStyle = 'rgba(3, 3, 8, 0.15)';\r\n            ctx.fillRect(0, 0, w, h);\r\n\r\n            // Stars\r\n            ctx.fillStyle = '#ffffff';\r\n            stars.forEach(star => {\r\n                star.z -= speed * 15;\r\n                if (star.z <= 0) {\r\n                    star.z = w;\r\n                    star.x = Math.random() * w - w / 2;\r\n                    star.y = Math.random() * h - h / 2;\r\n                }\r\n\r\n                const k = 128.0 / star.z;\r\n                const px = star.x * k + w / 2;\r\n                const py = star.y * k + h / 2;\r\n\r\n                if (px >= 0 && px <= w && py >= 0 && py <= h) {\r\n                    const size = (1 - star.z / w) * 2;\r\n                    const alpha = (1 - star.z / w) * 0.8;\r\n\r\n                    ctx.globalAlpha = alpha;\r\n                    ctx.beginPath();\r\n                    ctx.arc(px, py, size, 0, Math.PI * 2);\r\n                    ctx.fill();\r\n                    ctx.globalAlpha = 1;\r\n                }\r\n            });\r\n\r\n            animationFrameId = requestAnimationFrame(render);\r\n        };\r\n\r\n        render();\r\n\r\n        const handleResize = () => {\r\n            w = canvas.width = window.innerWidth;\r\n            h = canvas.height = window.innerHeight;\r\n        };\r\n        window.addEventListener('resize', handleResize);\r\n\r\n        return () => {\r\n            window.removeEventListener('resize', handleResize);\r\n            cancelAnimationFrame(animationFrameId);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-0 overflow-hidden bg-[#030308]\">\r\n            {/* Animated Mesh Gradient Orbs */}\r\n            <div className=\"absolute inset-0 overflow-hidden\">\r\n                {ORBS.map((orb, i) => (\r\n                    <motion.div\r\n                        key={i}\r\n                        className=\"absolute rounded-full blur-[100px]\"\r\n                        style={{\r\n                            width: orb.size,\r\n                            height: orb.size,\r\n                            background: `radial-gradient(circle, ${orb.color} 0%, transparent 70%)`,\r\n                        }}\r\n                        animate={{\r\n                            x: [\r\n                                `${orb.x}vw`,\r\n                                `${orb.x + 15}vw`,\r\n                                `${orb.x - 10}vw`,\r\n                                `${orb.x}vw`\r\n                            ],\r\n                            y: [\r\n                                `${orb.y}vh`,\r\n                                `${orb.y - 20}vh`,\r\n                                `${orb.y + 10}vh`,\r\n                                `${orb.y}vh`\r\n                            ],\r\n                            scale: [1, 1.2, 0.9, 1],\r\n                        }}\r\n                        transition={{\r\n                            duration: orb.duration,\r\n                            repeat: Infinity,\r\n                            ease: \"easeInOut\"\r\n                        }}\r\n                    />\r\n                ))}\r\n            </div>\r\n\r\n            {/* Starfield Canvas */}\r\n            <canvas\r\n                ref={canvasRef}\r\n                className=\"absolute inset-0 pointer-events-none mix-blend-screen\"\r\n            />\r\n\r\n            {/* Spotlight Effect Following Mouse */}\r\n            <div\r\n                className=\"pointer-events-none fixed inset-0 z-10 opacity-30 transition-opacity duration-300\"\r\n                style={{\r\n                    background: `radial-gradient(600px circle at ${mousePos.x}px ${mousePos.y}px, rgba(37, 99, 235, 0.15), transparent 40%)`\r\n                }}\r\n            />\r\n\r\n            {/* Noise Texture Overlay */}\r\n            <div\r\n                className=\"absolute inset-0 pointer-events-none opacity-[0.03] mix-blend-overlay\"\r\n                style={{\r\n                    backgroundImage: `url(\"data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E\")`,\r\n                }}\r\n            />\r\n\r\n            {/* Vignette */}\r\n            <div\r\n                className=\"absolute inset-0 pointer-events-none\"\r\n                style={{\r\n                    background: 'radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.6) 100%)'\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default IntergalacticBackground;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1774, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/components/Layout.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { AppView, SecurityLog } from '../types';\r\nimport KernelStream from './KernelStream';\r\nimport { groqService } from '../services/groqService';\r\nimport { geminiService } from '../services/geminiService';\r\nimport { appwriteService } from '../services/appwriteService';\r\nimport IntergalacticBackground from './IntergalacticBackground';\r\n\r\ninterface LayoutProps {\r\n  children: React.ReactNode;\r\n  activeView: AppView;\r\n  setView: (view: AppView) => void;\r\n}\r\n\r\nconst ApiKeyGuard: React.FC = () => {\r\n  const [hasKey, setHasKey] = useState(false);\r\n  const [isSystemManaged, setIsSystemManaged] = useState(false);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [inputKey, setInputKey] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    setHasKey(geminiService.hasKey());\r\n    setIsSystemManaged(geminiService.isSystemManaged());\r\n  }, []);\r\n\r\n  const handleSaveKey = () => {\r\n    if (geminiService.setApiKey(inputKey)) {\r\n      setHasKey(true);\r\n      setShowModal(false);\r\n      setInputKey('');\r\n      setError('');\r\n    } else {\r\n      setError(\"Clé invalide. Veuillez vérifier le format.\");\r\n    }\r\n  };\r\n\r\n  const handleClick = () => {\r\n    if (!isSystemManaged) setShowModal(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        onClick={handleClick}\r\n        className={`p-4 rounded-xl border transition-all cursor-pointer group relative overflow-hidden ${hasKey\r\n          ? (isSystemManaged ? 'bg-green-500/5 border-green-500/20' : 'bg-blue-500/5 border-blue-500/20 hover:border-blue-500/40')\r\n          : 'bg-amber-500/5 border-amber-500/20 hover:border-amber-500/40'\r\n          } border-glow backdrop-blur-sm`}\r\n      >\r\n        <div className=\"flex items-center gap-3 relative z-10\">\r\n          <div className={`w-8 h-8 rounded-lg flex items-center justify-center transition-colors shrink-0 ${hasKey ? (isSystemManaged ? 'bg-green-600 text-white shadow-[0_0_10px_#16a34a]' : 'bg-blue-600 text-white shadow-[0_0_10px_#2563eb]') : 'bg-gray-700 text-gray-400'\r\n            }`}>\r\n            {hasKey ? (\r\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\r\n            ) : (\r\n              <svg className=\"w-4 h-4 animate-pulse\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" /></svg>\r\n            )}\r\n          </div>\r\n          <div className=\"min-w-0 flex-1\">\r\n            <p className=\"text-[10px] font-bold uppercase tracking-widest text-gray-500 truncate\">Clé Neurale Gemini</p>\r\n            <p className={`text-[10px] font-mono font-bold truncate ${hasKey ? (isSystemManaged ? 'text-green-400' : 'text-blue-400') : 'text-gray-400'}`}>\r\n              {hasKey ? (isSystemManaged ? 'GÉRÉ PAR LE SYSTÈME' : 'LIAISON UTILISATEUR') : 'CLÉ REQUISE'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {showModal && (\r\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fadeIn\" onClick={() => setShowModal(false)}>\r\n          <div\r\n            className=\"w-full max-w-md bg-[#0a0a0a] border border-blue-500/30 rounded-2xl p-6 shadow-[0_0_50px_rgba(37,99,235,0.2)] relative glass-panel\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"flex items-center gap-3 mb-6\">\r\n              <div className=\"w-10 h-10 rounded-xl bg-blue-600 flex items-center justify-center text-white shadow-lg shadow-blue-600/30\">\r\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" /></svg>\r\n              </div>\r\n              <div>\r\n                <h3 className=\"text-lg font-bold text-white font-heading tracking-wide\">INITIALISATION NEURALE</h3>\r\n                <p className=\"text-[10px] text-gray-400 uppercase tracking-widest\">Protocole Gemini API</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"text-[10px] text-blue-400 font-bold uppercase tracking-widest mb-2 block\">CLÉ API (Google AI Studio)</label>\r\n                <input\r\n                  type=\"password\"\r\n                  value={inputKey}\r\n                  onChange={(e) => setInputKey(e.target.value)}\r\n                  placeholder=\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\r\n                  className=\"w-full bg-black border border-white/10 rounded-xl px-4 py-3 text-sm text-white font-mono focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/50 outline-none transition-all placeholder:text-gray-700\"\r\n                  autoFocus\r\n                />\r\n                {error && <p className=\"text-red-500 text-[10px] mt-2 font-mono\">{error}</p>}\r\n                <p className=\"text-[9px] text-gray-600 mt-2\">\r\n                  <a href=\"https://aistudio.google.com/app/apikey\" target=\"_blank\" rel=\"noreferrer\" className=\"hover:text-blue-400 underline decoration-blue-500/30\">\r\n                    Obtenir une clé API Gemini &gt;\r\n                  </a>\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"flex gap-3 pt-2\">\r\n                <button\r\n                  onClick={() => { setShowModal(false); setError(''); }}\r\n                  className=\"flex-1 py-3 rounded-xl bg-white/5 text-gray-400 font-bold text-xs uppercase tracking-widest hover:bg-white/10 transition-colors\"\r\n                >\r\n                  Annuler\r\n                </button>\r\n                <button\r\n                  onClick={handleSaveKey}\r\n                  className=\"flex-1 py-3 rounded-xl bg-blue-600 text-white font-bold text-xs uppercase tracking-widest hover:bg-blue-500 transition-colors shadow-lg shadow-blue-900/40\"\r\n                >\r\n                  Lier\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nconst AppwriteGuard: React.FC = () => {\r\n  const [projectId, setProjectId] = useState('');\r\n  const [isLinked, setIsLinked] = useState(false);\r\n  const [isSystemManaged, setIsSystemManaged] = useState(false);\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsSystemManaged(appwriteService.isSystemManaged());\r\n    const stored = localStorage.getItem('GENESIS_APPWRITE_PROJECT');\r\n    if (stored || appwriteService.isConfigured) {\r\n      setProjectId(stored || 'SYSTEM');\r\n      setIsLinked(true);\r\n    }\r\n  }, []);\r\n\r\n  const handleLink = () => {\r\n    if (projectId.length > 5) {\r\n      appwriteService.init(projectId);\r\n      setIsLinked(true);\r\n      setShowModal(false);\r\n    }\r\n  };\r\n\r\n  const handleClick = () => {\r\n    if (!isSystemManaged) setShowModal(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        onClick={handleClick}\r\n        className={`p-4 rounded-xl border transition-all cursor-pointer group relative overflow-hidden mt-3 ${isLinked\r\n          ? (isSystemManaged ? 'bg-green-500/5 border-green-500/20' : 'bg-pink-500/5 border-pink-500/20 hover:border-pink-500/40')\r\n          : 'bg-gray-800/40 border-gray-700 hover:border-pink-500/30'\r\n          } border-glow backdrop-blur-sm`}\r\n      >\r\n        <div className=\"flex items-center gap-3 relative z-10\">\r\n          <div className={`w-8 h-8 rounded-lg flex items-center justify-center transition-colors shrink-0 ${isLinked ? (isSystemManaged ? 'bg-green-600 text-white' : 'bg-pink-600 text-white shadow-[0_0_10px_#db2777]') : 'bg-gray-700 text-gray-400'\r\n            }`}>\r\n            {isLinked ? (\r\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4\" /></svg>\r\n            ) : (\r\n              <svg className=\"w-4 h-4 animate-pulse\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4\" /></svg>\r\n            )}\r\n          </div>\r\n          <div className=\"min-w-0 flex-1\">\r\n            <p className=\"text-[10px] font-bold uppercase tracking-widest text-gray-500 truncate\">MÉMOIRE APPWRITE</p>\r\n            <p className={`text-[10px] font-mono font-bold truncate ${isLinked ? (isSystemManaged ? 'text-green-400' : 'text-pink-400') : 'text-gray-400'}`}>\r\n              {isLinked ? (isSystemManaged ? 'GÉRÉ PAR LE SYSTÈME' : 'SYNC ACTIVE') : 'NON CONNECTÉ'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {showModal && (\r\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fadeIn\" onClick={() => setShowModal(false)}>\r\n          <div className=\"w-full max-w-md bg-[#0a0a0a] border border-pink-500/30 rounded-2xl p-6 shadow-[0_0_50px_rgba(219,39,119,0.2)] glass-panel\" onClick={(e) => e.stopPropagation()}>\r\n            <h3 className=\"text-lg font-bold text-white font-heading tracking-wide mb-4 flex items-center gap-2\">\r\n              <span className=\"text-pink-500\">❖</span> CONFIGURATION APPWRITE\r\n            </h3>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"text-[10px] text-pink-400 font-bold uppercase tracking-widest mb-2 block\">PROJECT ID</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={projectId}\r\n                  onChange={(e) => setProjectId(e.target.value)}\r\n                  placeholder=\"65a...\"\r\n                  className=\"w-full bg-black border border-white/10 rounded-xl px-4 py-3 text-sm text-white font-mono focus:border-pink-500/50 outline-none\"\r\n                />\r\n              </div>\r\n              <button\r\n                onClick={handleLink}\r\n                className=\"w-full py-3 rounded-xl bg-pink-600 text-white font-bold text-xs uppercase tracking-widest hover:bg-pink-500 transition-colors shadow-lg shadow-pink-900/40\"\r\n              >\r\n                CONNECTER LA BASE DE DONNÉES\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nconst VertexKeyGuard: React.FC = () => {\r\n  const [status, setStatus] = useState<'idle' | 'connecting' | 'active'>('idle');\r\n\r\n  const handleConnect = () => {\r\n    if (status === 'active') return;\r\n    setStatus('connecting');\r\n    setTimeout(() => {\r\n      setStatus('active');\r\n    }, 2000);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      onClick={handleConnect}\r\n      className={`p-4 rounded-xl border transition-all cursor-pointer group relative overflow-hidden mt-3 ${status === 'active'\r\n        ? 'bg-purple-500/5 border-purple-500/20 hover:border-purple-500/40'\r\n        : 'bg-gray-800/40 border-gray-700 hover:border-purple-500/30'\r\n        } border-glow backdrop-blur-sm`}\r\n    >\r\n      <div className=\"flex items-center gap-3 relative z-10\">\r\n        <div className={`w-8 h-8 rounded-lg flex items-center justify-center transition-colors shrink-0 ${status === 'active' ? 'bg-purple-600 text-white shadow-[0_0_10px_#9333ea]' : status === 'connecting' ? 'bg-purple-900/50 text-purple-300' : 'bg-gray-700 text-gray-400'\r\n          }`}>\r\n          {status === 'active' ? (\r\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z\" /></svg>\r\n          ) : status === 'connecting' ? (\r\n            <svg className=\"w-4 h-4 animate-spin\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" /></svg>\r\n          ) : (\r\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" /></svg>\r\n          )}\r\n        </div>\r\n        <div className=\"min-w-0 flex-1\">\r\n          <p className=\"text-[10px] font-bold uppercase tracking-widest text-gray-500 truncate\">Vertex Cloud IAM</p>\r\n          <p className={`text-[10px] font-mono font-bold truncate ${status === 'active' ? 'text-purple-400' : 'text-gray-400'}`}>\r\n            {status === 'active' ? 'vertex-express@gen...' : status === 'connecting' ? 'HANDSHAKE...' : 'OFFLINE'}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst GroqKeyGuard: React.FC = () => {\r\n  const [hasKey, setHasKey] = useState(false);\r\n  const [isEnabled, setIsEnabled] = useState(false);\r\n  const [isSystemManaged, setIsSystemManaged] = useState(false);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [inputKey, setInputKey] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    setHasKey(groqService.hasKey());\r\n    setIsEnabled(groqService.isEnabled());\r\n    setIsSystemManaged(groqService.isSystemManaged());\r\n  }, []);\r\n\r\n  const handleSaveKey = () => {\r\n    if (groqService.setApiKey(inputKey)) {\r\n      setHasKey(true);\r\n      setIsEnabled(true);\r\n      setShowModal(false);\r\n      setInputKey('');\r\n      setError('');\r\n    } else {\r\n      setError(\"Format invalide. Doit commencer par 'gsk_'.\");\r\n    }\r\n  };\r\n\r\n  const toggleGroq = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    if (!hasKey && !isSystemManaged) {\r\n      setShowModal(true);\r\n      return;\r\n    }\r\n    if (isSystemManaged) return;\r\n\r\n    const newState = !isEnabled;\r\n    groqService.setEnabled(newState);\r\n    setIsEnabled(newState);\r\n  };\r\n\r\n  const handleClick = () => {\r\n    if (!isSystemManaged) setShowModal(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        onClick={handleClick}\r\n        className={`p-4 rounded-xl border transition-all cursor-pointer group relative overflow-hidden mt-3 ${hasKey && isEnabled\r\n          ? (isSystemManaged ? 'bg-green-500/5 border-green-500/20' : 'bg-orange-500/5 border-orange-500/20 hover:border-orange-500/40')\r\n          : 'bg-gray-800/40 border-gray-700 hover:border-orange-500/30'\r\n          } border-glow backdrop-blur-sm`}\r\n      >\r\n        <div className=\"flex items-center gap-3 relative z-10\">\r\n          <div className={`w-8 h-8 rounded-lg flex items-center justify-center transition-colors shrink-0 ${hasKey && isEnabled ? (isSystemManaged ? 'bg-green-600 text-white shadow-[0_0_10px_#16a34a]' : 'bg-orange-600 text-white shadow-[0_0_10px_#f97316]') : 'bg-gray-700 text-gray-400'\r\n            }`}>\r\n            {hasKey ? (\r\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" /></svg>\r\n            ) : (\r\n              <svg className=\"w-4 h-4 animate-pulse\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" /></svg>\r\n            )}\r\n          </div>\r\n          <div className=\"min-w-0 flex-1\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <p className=\"text-[10px] font-bold uppercase tracking-widest text-gray-500 truncate\">GROQ LPU ENGINE</p>\r\n              {hasKey && !isSystemManaged && (\r\n                <button\r\n                  onClick={toggleGroq}\r\n                  className={`w-6 h-3 rounded-full relative transition-colors ${isEnabled ? 'bg-orange-500' : 'bg-gray-600'}`}\r\n                >\r\n                  <div className={`absolute top-0.5 w-2 h-2 bg-white rounded-full transition-all ${isEnabled ? 'left-3.5' : 'left-0.5'}`}></div>\r\n                </button>\r\n              )}\r\n            </div>\r\n            <p className={`text-[10px] font-mono font-bold truncate ${hasKey && isEnabled ? (isSystemManaged ? 'text-green-400' : 'text-orange-400') : 'text-gray-400'}`}>\r\n              {hasKey ? (isEnabled ? (isSystemManaged ? 'AUTO-GÉRÉ' : '820 T/s • ONLINE') : 'STANDBY') : 'CLÉ REQUISE'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {showModal && (\r\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fadeIn\" onClick={() => setShowModal(false)}>\r\n          <div className=\"w-full max-w-md bg-[#0a0a0a] border border-orange-500/30 rounded-2xl p-6 shadow-[0_0_50px_rgba(249,115,22,0.2)] glass-panel\" onClick={(e) => e.stopPropagation()}>\r\n            <h3 className=\"text-lg font-bold text-white font-heading tracking-wide mb-4\">INITIALISATION LPU</h3>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"text-[10px] text-orange-400 font-bold uppercase tracking-widest mb-2 block\">CLÉ API (gsk_...)</label>\r\n                <input\r\n                  type=\"password\"\r\n                  value={inputKey}\r\n                  onChange={(e) => setInputKey(e.target.value)}\r\n                  placeholder=\"gsk_xxxxxxxxxxxxxxxx\"\r\n                  className=\"w-full bg-black border border-white/10 rounded-xl px-4 py-3 text-sm text-white font-mono focus:border-orange-500/50 outline-none\"\r\n                  autoFocus\r\n                />\r\n                {error && <p className=\"text-red-500 text-[10px] mt-2 font-mono\">{error}</p>}\r\n              </div>\r\n              <button\r\n                onClick={handleSaveKey}\r\n                className=\"w-full py-3 rounded-xl bg-orange-600 text-white font-bold text-xs uppercase tracking-widest hover:bg-orange-500 transition-colors shadow-lg shadow-orange-900/40\"\r\n              >\r\n                Activer\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nconst Layout: React.FC<LayoutProps> = ({ children, activeView, setView }) => {\r\n  const [logs, setLogs] = useState<SecurityLog[]>([]);\r\n  const [telemetry, setTelemetry] = useState({ cpu: 45, entropy: 98.2, exterminated: 0, data: '12.4' });\r\n  const [criticalState, setCriticalState] = useState(false);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const saved = localStorage.getItem('genesis_evolution_memory');\r\n    if (saved) {\r\n      try {\r\n        const parsed = JSON.parse(saved);\r\n        setTelemetry(prev => ({ ...prev, data: parseFloat(parsed.dataConsumed || '12.4').toFixed(2) }));\r\n      } catch (e) { }\r\n    }\r\n\r\n    const handleTelemetryUpdate = (e: any) => {\r\n      if (e.detail) {\r\n        if (e.detail.dataConsumed) {\r\n          setTelemetry(prev => ({ ...prev, data: e.detail.dataConsumed }));\r\n        }\r\n        if (e.detail.stress) {\r\n          setCriticalState(e.detail.stress > 80);\r\n        }\r\n      }\r\n    };\r\n\r\n    const handleSecurityEvent = (e: any) => {\r\n      if (e.detail && e.detail.message) {\r\n        setTelemetry(prev => ({ ...prev, exterminated: prev.exterminated + (e.detail.type === 'audit' ? 1 : 0) }));\r\n        setLogs(prev => [{\r\n          id: Math.random().toString(36),\r\n          timestamp: new Date().toLocaleTimeString(),\r\n          message: e.detail.message,\r\n          type: e.detail.type || 'info'\r\n        }, ...prev].slice(0, 5));\r\n      }\r\n    };\r\n\r\n    window.addEventListener('genesis-telemetry-update', handleTelemetryUpdate);\r\n    window.addEventListener('genesis-security-event', handleSecurityEvent);\r\n\r\n    const interval = setInterval(() => {\r\n      setTelemetry(prev => ({\r\n        ...prev,\r\n        cpu: Math.floor(40 + Math.random() * 20),\r\n        entropy: +(98 + Math.random() * 1.5).toFixed(1)\r\n      }));\r\n    }, 3000);\r\n\r\n    return () => {\r\n      window.removeEventListener('genesis-telemetry-update', handleTelemetryUpdate);\r\n      window.removeEventListener('genesis-security-event', handleSecurityEvent);\r\n      clearInterval(interval);\r\n    };\r\n  }, []);\r\n\r\n  // NOUVELLE STRUCTURE MENU GROUPÉ\r\n  const navGroups = [\r\n    {\r\n      title: \"GOUVERNANCE\",\r\n      items: [\r\n        { id: 'dashboard', label: 'Tableau de Bord', icon: 'M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z' },\r\n        { id: 'fusion', label: 'Nexus Multi-Agents', icon: 'M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z' },\r\n        { id: 'architecture', label: 'Lattice', icon: 'M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10' },\r\n      ]\r\n    },\r\n    {\r\n      title: \"INTELLIGENCE\",\r\n      items: [\r\n        { id: 'evolution', label: 'Génome IA', icon: 'M13 10V3L4 14h7v7l9-11h-7z' },\r\n        { id: 'lab', label: 'Vocal', icon: 'M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z' },\r\n        { id: 'consciousness', label: 'Conscience', icon: 'M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z' },\r\n      ]\r\n    },\r\n    {\r\n      title: \"DÉFENSE\",\r\n      items: [\r\n        { id: 'threats', label: 'Menaces Cyber', icon: 'M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z' },\r\n        { id: 'vault', label: 'Coffre PQC', icon: 'M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z' },\r\n        { id: 'visualizer', label: 'Synthèse', icon: 'M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z' },\r\n      ]\r\n    },\r\n    {\r\n      title: \"OPÉRATIONS\",\r\n      items: [\r\n        { id: 'map', label: 'Carte Globale', icon: 'M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7' },\r\n      ]\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className={`flex h-screen h-[100dvh] overflow-hidden bg-[#050505] selection:bg-blue-500/30 transition-all duration-1000 ${criticalState ? 'animate-glitch contrast-125 brightness-110 grayscale-[0.3]' : ''}`}>\r\n\r\n      {/* Immersive Background */}\r\n      <div className=\"fixed inset-0 z-0\">\r\n        <IntergalacticBackground />\r\n        <div className=\"absolute inset-0 pointer-events-none scanline opacity-20 mix-blend-overlay\"></div>\r\n      </div>\r\n\r\n      {/* HUD Overlay */}\r\n      <div className=\"relative z-10 pointer-events-none\">\r\n        <KernelStream view={activeView} />\r\n      </div>\r\n\r\n      {/* Mobile Backdrop */}\r\n      {mobileMenuOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-40 lg:hidden\"\r\n          onClick={() => setMobileMenuOpen(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Sidebar Navigation */}\r\n      <aside className={`\r\n        fixed inset-y-0 left-0 z-[60] w-72 glass border-r border-white/5 flex flex-col transform transition-transform duration-300 ease-in-out\r\n        lg:relative lg:translate-x-0 bg-black/80 backdrop-blur-xl\r\n        ${mobileMenuOpen ? 'translate-x-0' : '-translate-x-full'}\r\n      `}>\r\n        <div className=\"p-6 md:p-8 flex-1 overflow-y-auto custom-scrollbar\">\r\n          <div className=\"flex items-center justify-between mb-8\">\r\n            <div className=\"flex items-center gap-4 group cursor-pointer\" onClick={() => { setView('architecture'); setMobileMenuOpen(false); }}>\r\n              <div className={`w-10 h-10 rounded-lg flex items-center justify-center shadow-[0_0_20px_rgba(37,99,235,0.8)] transition-transform group-hover:rotate-12 ${criticalState ? 'bg-red-600 animate-pulse' : 'bg-blue-600'}`}>\r\n                <span className=\"font-bold text-xl text-white\">Ω</span>\r\n              </div>\r\n              <h1 className=\"text-2xl font-bold font-heading tracking-tighter text-white uppercase italic text-glow\">Genesis</h1>\r\n            </div>\r\n            <button onClick={() => setMobileMenuOpen(false)} className=\"lg:hidden p-2 text-white hover:text-red-400 transition-colors\">\r\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" /></svg>\r\n            </button>\r\n          </div>\r\n\r\n          <nav className=\"space-y-6 mb-8\">\r\n            {navGroups.map((group, idx) => (\r\n              <div key={idx}>\r\n                <h3 className=\"text-[10px] text-gray-500 font-bold uppercase tracking-[0.2em] mb-3 ml-2\">{group.title}</h3>\r\n                <div className=\"space-y-1\">\r\n                  {group.items.map((item) => (\r\n                    <button\r\n                      key={item.id}\r\n                      onClick={() => { setView(item.id as AppView); setMobileMenuOpen(false); }}\r\n                      className={`w-full flex items-center gap-4 px-4 py-2.5 rounded-xl transition-all duration-300 group relative overflow-hidden ${activeView === item.id\r\n                        ? 'bg-blue-600/20 text-blue-400 border border-blue-500/30'\r\n                        : 'text-gray-500 hover:text-white hover:bg-white/5'\r\n                        }`}\r\n                    >\r\n                      <svg className={`w-4 h-4 shrink-0 transition-colors ${activeView === item.id ? 'text-blue-400' : 'group-hover:text-blue-500'}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d={item.icon} />\r\n                      </svg>\r\n                      <span className=\"font-bold text-[10px] uppercase tracking-widest truncate\">{item.label}</span>\r\n                      {activeView === item.id && <div className=\"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-3/4 bg-blue-500 rounded-r-lg shadow-[0_0_10px_#3b82f6]\"></div>}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </nav>\r\n\r\n          <div className=\"mt-4 pt-4 border-t border-white/5\">\r\n            <ApiKeyGuard />\r\n            <AppwriteGuard />\r\n            <VertexKeyGuard />\r\n            <GroqKeyGuard />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-4 md:p-6 bg-black/40 border-t border-white/5 backdrop-blur-md\">\r\n          <h3 className=\"text-[10px] font-bold text-gray-500 uppercase tracking-[0.4em] mb-4 flex items-center gap-2\">\r\n            <span className=\"w-1.5 h-1.5 bg-green-500 rounded-full animate-ping\"></span>\r\n            LOG_KERNEL_Ω\r\n          </h3>\r\n          <div className=\"space-y-3\">\r\n            {logs.map(log => (\r\n              <div key={log.id} className=\"animate-slideIn relative pl-3 border-l-2 border-white/5 group hover:border-blue-500/50 transition-colors cursor-crosshair\">\r\n                <div className=\"flex justify-between text-[8px] mb-1\">\r\n                  <span className=\"text-gray-600 font-mono group-hover:text-blue-400\">{log.timestamp}</span>\r\n                  <span className={`font-bold ${log.type === 'critical' ? 'text-red-500 animate-pulse' : log.type === 'evolution' ? 'text-purple-500' : 'text-blue-500'}`}>\r\n                    {log.type.toUpperCase()}\r\n                  </span>\r\n                </div>\r\n                <p className=\"text-[9px] text-gray-400 font-mono leading-none truncate group-hover:text-white transition-colors\">{log.message}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col h-full overflow-hidden w-full relative z-10\">\r\n        <header className=\"h-16 border-b border-white/5 glass flex items-center justify-between px-4 md:px-10 z-10 shrink-0 shadow-lg shadow-black/50\">\r\n          <div className=\"flex gap-4 md:gap-8 items-center\">\r\n            {/* Mobile Menu Trigger - High Z-Index & Contrast */}\r\n            <button\r\n              onClick={() => setMobileMenuOpen(true)}\r\n              className=\"lg:hidden p-2 text-white bg-blue-600/20 border border-blue-500/50 rounded-lg hover:bg-blue-600 hover:text-white transition-all active:scale-95 z-50 relative\"\r\n            >\r\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" /></svg>\r\n            </button>\r\n\r\n            <div className=\"hidden md:flex flex-col\">\r\n              <span className=\"text-[8px] text-gray-500 uppercase font-bold tracking-widest\">INGESTION</span>\r\n              <span className=\"text-[10px] font-mono text-amber-500\">{telemetry.data} PB</span>\r\n            </div>\r\n            <div className=\"hidden md:block w-px h-8 bg-white/5\"></div>\r\n            <div className=\"flex flex-col\">\r\n              <span className=\"text-[8px] text-gray-500 uppercase font-bold tracking-widest hidden md:block\">STABILITÉ_ENTROPIE</span>\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-20 md:w-32 h-1.5 bg-white/5 rounded-full overflow-hidden border border-white/5 relative\">\r\n                  <div className={`h-full transition-all duration-1000 ${criticalState ? 'bg-red-500' : 'bg-green-500'}`} style={{ width: `${telemetry.entropy}%` }}></div>\r\n                  {/* Scanning line for bar */}\r\n                  <div className=\"absolute inset-y-0 w-1 bg-white/50 animate-[scanline_2s_linear_infinite]\" style={{ left: `${telemetry.entropy}%` }}></div>\r\n                </div>\r\n                <span className={`text-[10px] font-mono ${criticalState ? 'text-red-500 animate-pulse' : 'text-green-400'}`}>{telemetry.entropy}%</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-6\">\r\n            <div className={`hidden md:flex items-center gap-2 border px-4 py-1.5 rounded-full transition-all hover:bg-red-500/10 cursor-help ${criticalState ? 'bg-red-500/20 border-red-500/40 animate-bounce' : 'bg-red-500/10 border-red-500/20'}`}>\r\n              <span className={`w-2 h-2 rounded-full ${telemetry.exterminated > 0 ? 'bg-red-500 animate-ping' : 'bg-red-900'}`}></span>\r\n              <span className=\"text-[10px] font-bold text-red-500 uppercase font-mono\">{telemetry.exterminated} PURGES</span>\r\n            </div>\r\n            <div className=\"text-[9px] text-gray-500 font-mono hover:text-blue-400 cursor-pointer\">v0.9.1</div>\r\n          </div>\r\n        </header>\r\n\r\n        <main className={`flex-1 overflow-y-auto relative p-4 md:p-8 lg:p-12 custom-scrollbar ${criticalState ? 'bg-red-900/5' : ''}`}>\r\n          <div className=\"max-w-7xl mx-auto relative z-10 h-full flex flex-col\">\r\n            <AnimatePresence mode=\"wait\">\r\n              <motion.div\r\n                key={activeView}\r\n                initial={{ opacity: 0, y: 20, scale: 0.98 }}\r\n                animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                exit={{ opacity: 0, y: -20, scale: 0.98 }}\r\n                transition={{ duration: 0.3, ease: [0.25, 0.46, 0.45, 0.94] }}\r\n                className=\"h-full flex flex-col\"\r\n              >\r\n                {children}\r\n              </motion.div>\r\n            </AnimatePresence>\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      <style>{`\r\n        @keyframes glitch {\r\n          0% { transform: translate(0) }\r\n          20% { transform: translate(-2px, 2px) }\r\n          40% { transform: translate(-2px, -2px) }\r\n          60% { transform: translate(2px, 2px) }\r\n          80% { transform: translate(2px, -2px) }\r\n          100% { transform: translate(0) }\r\n        }\r\n        .animate-glitch {\r\n          animation: glitch 0.2s cubic-bezier(.25, .46, .45, .94) both infinite;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3427, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/components/ArchitectureViewer.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport { geminiService } from '../services/geminiService';\r\n\r\ninterface HistoryPoint {\r\n  time: string;\r\n  replicationRate: number;\r\n  quantumEntropy: number;\r\n  greyGooRisk: number;\r\n  latticeStress: number;\r\n}\r\n\r\nconst LatticeSimulation: React.FC<{ stress: number }> = ({ stress }) => {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n\r\n    // Resize handling\r\n    const parent = canvas.parentElement;\r\n    if (parent) {\r\n      canvas.width = parent.clientWidth;\r\n      canvas.height = parent.clientHeight;\r\n    }\r\n\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return;\r\n\r\n    let animationFrameId: number;\r\n    const particles: any[] = [];\r\n    const particleCount = window.innerWidth < 768 ? 20 : 40;\r\n\r\n    for (let i = 0; i < particleCount; i++) {\r\n      particles.push({\r\n        x: Math.random() * canvas.width,\r\n        y: Math.random() * canvas.height,\r\n        vx: (Math.random() - 0.5) * (stress / 10),\r\n        vy: (Math.random() - 0.5) * (stress / 10),\r\n      });\r\n    }\r\n\r\n    const render = () => {\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n      ctx.strokeStyle = stress > 70 ? 'rgba(245, 158, 11, 0.4)' : stress > 15 ? 'rgba(59, 130, 246, 0.2)' : 'rgba(34, 197, 94, 0.2)';\r\n      ctx.lineWidth = 0.5;\r\n\r\n      particles.forEach((p, i) => {\r\n        p.x += p.vx * (stress / 20);\r\n        p.y += p.vy * (stress / 20);\r\n\r\n        if (p.x < 0 || p.x > canvas.width) p.vx *= -1;\r\n        if (p.y < 0 || p.y > canvas.height) p.vy *= -1;\r\n\r\n        particles.slice(i + 1).forEach(p2 => {\r\n          const dx = p.x - p2.x;\r\n          const dy = p.y - p2.y;\r\n          const dist = Math.sqrt(dx * dx + dy * dy);\r\n          if (dist < 100) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(p.x, p.y);\r\n            ctx.lineTo(p2.x, p2.y);\r\n            ctx.stroke();\r\n          }\r\n        });\r\n      });\r\n\r\n      animationFrameId = requestAnimationFrame(render);\r\n    };\r\n\r\n    render();\r\n    return () => cancelAnimationFrame(animationFrameId);\r\n  }, [stress]);\r\n\r\n  return <canvas ref={canvasRef} className=\"w-full h-full opacity-60\" />;\r\n};\r\n\r\nconst ArchitectureViewer: React.FC = () => {\r\n  const [metrics, setMetrics] = useState({\r\n    replicationRate: 0.012,\r\n    quantumEntropy: 98.4,\r\n    latticeStress: 12,\r\n    batteryLevel: 100,\r\n    latency: 0,\r\n    cores: 0\r\n  });\r\n\r\n  const [history, setHistory] = useState<HistoryPoint[]>([]);\r\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n  const [isConstituting, setIsConstituting] = useState(false);\r\n  const [diagnosticReport, setDiagnosticReport] = useState<string | null>(null);\r\n\r\n  // Hook pour les métriques réelles (identique)\r\n  useEffect(() => {\r\n    const updateRealMetrics = async () => {\r\n      let batt = 100;\r\n      try {\r\n        if ((navigator as any).getBattery) {\r\n          const battery = await (navigator as any).getBattery();\r\n          batt = battery.level * 100;\r\n        }\r\n      } catch (e) { }\r\n      const cores = navigator.hardwareConcurrency || 4;\r\n      const connection = (navigator as any).connection || (navigator as any).mozConnection || (navigator as any).webkitConnection;\r\n      const rtt = connection ? connection.rtt : 50;\r\n      const perf = performance as any;\r\n      let memStress = 20;\r\n      if (perf && perf.memory) {\r\n        const ratio = perf.memory.usedJSHeapSize / perf.memory.jsHeapSizeLimit;\r\n        memStress = Math.floor(ratio * 100);\r\n      }\r\n      setMetrics(prev => {\r\n        const baseRate = 0.01;\r\n        const loadFactor = (100 - batt) / 10000;\r\n        const newRepRate = baseRate + loadFactor + (Math.random() * 0.002);\r\n        const entropyLoss = Math.min(rtt / 100, 5);\r\n        const newEntropy = +(99.9 - entropyLoss + (Math.random() * 0.5 - 0.25)).toFixed(1);\r\n        const newStress = memStress + (rtt > 100 ? 10 : 0);\r\n        const risk = +((newRepRate * 5000) + (100 - newEntropy) * 2 + (newStress * 0.5)).toFixed(2);\r\n        const newPoint: HistoryPoint = {\r\n          time: new Date().toLocaleTimeString([], { hour12: false, minute: '2-digit', second: '2-digit' }),\r\n          replicationRate: +(newRepRate * 100).toFixed(2),\r\n          quantumEntropy: newEntropy,\r\n          greyGooRisk: Math.min(risk, 100),\r\n          latticeStress: Math.max(0, Math.min(newStress, 100))\r\n        };\r\n        setHistory(currentHistory => [...currentHistory, newPoint].slice(-30));\r\n        return { replicationRate: newRepRate, quantumEntropy: newEntropy, latticeStress: Math.max(0, Math.min(newStress, 100)), batteryLevel: Math.round(batt), latency: rtt, cores: cores };\r\n      });\r\n    };\r\n    const interval = setInterval(() => { if (!isConstituting) updateRealMetrics(); }, 2000);\r\n    updateRealMetrics();\r\n    return () => clearInterval(interval);\r\n  }, [isConstituting]);\r\n\r\n  const handleDiagnostic = async () => {\r\n    setIsAnalyzing(true);\r\n    try {\r\n      const report = await geminiService.performGlobalDiagnostic(metrics);\r\n      setDiagnosticReport(report);\r\n    } catch (e) { console.error(e); } finally { setIsAnalyzing(false); }\r\n  };\r\n\r\n  const handleConfinement = async () => {\r\n    setIsConstituting(true);\r\n    try {\r\n      const report = await geminiService.initiateConfinementProtocol(metrics.latticeStress);\r\n      setDiagnosticReport(report);\r\n      for (let i = metrics.latticeStress; i >= 0; i -= 5) {\r\n        setMetrics(m => ({ ...m, latticeStress: i, replicationRate: 0.005 }));\r\n        await new Promise(r => setTimeout(r, 100));\r\n      }\r\n      window.dispatchEvent(new CustomEvent('genesis-security-event', { detail: { message: \"CONFINEMENT RÉUSSI\", type: 'critical' } }));\r\n    } catch (e) { console.error(e); } finally { setIsConstituting(false); }\r\n  };\r\n\r\n  const isDanger = metrics.replicationRate >= 0.02 || metrics.latticeStress > 80;\r\n\r\n  return (\r\n    <div className={`space-y-4 md:space-y-8 animate-fadeIn transition-all duration-1000 ${isDanger ? 'bg-red-950/5 p-6 rounded-[2.5rem] ring-2 ring-red-500/20' : ''}`}>\r\n      <header className=\"flex flex-col md:flex-row justify-between items-start md:items-end gap-4\">\r\n        <div className=\"relative\">\r\n          {isDanger && <div className=\"absolute -left-6 top-0 bottom-0 w-1.5 bg-red-600 animate-pulse rounded-full shadow-[0_0_15px_#dc2626]\"></div>}\r\n          <h2 className=\"text-3xl md:text-4xl font-bold mb-2 font-heading tracking-tight flex items-center gap-3\">\r\n            <span className={isDanger ? 'text-red-500 animate-pulse' : 'text-blue-500'}>Ω</span>\r\n            Architecture de Défense\r\n          </h2>\r\n          <p className=\"text-gray-400 font-mono text-[10px] md:text-xs uppercase tracking-widest\">Interface de Contrôle Tactique v5.1</p>\r\n        </div>\r\n        <div className=\"flex gap-6 md:gap-10 w-full md:w-auto justify-between md:justify-end\">\r\n          <div className=\"text-right\">\r\n            <p className=\"text-[9px] md:text-[10px] text-gray-500 uppercase font-bold tracking-[0.3em] mb-1\">Stress Lattice</p>\r\n            <p className={`text-2xl md:text-3xl font-mono ${metrics.latticeStress > 70 ? 'text-amber-500 animate-pulse' : metrics.latticeStress > 40 ? 'text-blue-300' : 'text-green-500'}`}>{metrics.latticeStress}%</p>\r\n          </div>\r\n          <div className=\"text-right\">\r\n            <p className=\"text-[9px] md:text-[10px] text-gray-500 uppercase font-bold tracking-[0.3em] mb-1\">Énergie</p>\r\n            <p className={`text-2xl md:text-3xl font-mono ${metrics.batteryLevel < 20 ? 'text-red-500 animate-pulse' : 'text-green-400'}`}>{metrics.batteryLevel}%</p>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* BENTO GRID LAYOUT */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 flex-1 min-h-0\">\r\n\r\n        {/* ROW 1: METRIC CARDS */}\r\n        <div className=\"glass p-4 rounded-2xl border border-white/5 relative overflow-hidden group\">\r\n          <div className=\"absolute inset-0 bg-blue-600/5 group-hover:bg-blue-600/10 transition-colors\"></div>\r\n          <p className=\"text-[9px] text-gray-500 uppercase font-bold tracking-[0.2em] relative z-10\">Stress Lattice</p>\r\n          <div className=\"flex items-end justify-between mt-2 relative z-10\">\r\n            <span className={`text-2xl font-mono font-bold ${metrics.latticeStress > 70 ? 'text-amber-500 animate-pulse' : 'text-blue-400'}`}>\r\n              {metrics.latticeStress}%\r\n            </span>\r\n            <div className={`w-2 h-2 rounded-full ${metrics.latticeStress > 50 ? 'bg-amber-500' : 'bg-green-500'}`}></div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"glass p-4 rounded-2xl border border-white/5 relative overflow-hidden group\">\r\n          <div className=\"absolute inset-0 bg-purple-600/5 group-hover:bg-purple-600/10 transition-colors\"></div>\r\n          <p className=\"text-[9px] text-gray-500 uppercase font-bold tracking-[0.2em] relative z-10\">Entropie Bell</p>\r\n          <div className=\"flex items-end justify-between mt-2 relative z-10\">\r\n            <span className=\"text-2xl font-mono font-bold text-purple-400\">{metrics.quantumEntropy}%</span>\r\n            <svg className=\"w-4 h-4 text-purple-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" /></svg>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"glass p-4 rounded-2xl border border-white/5 relative overflow-hidden group\">\r\n          <div className=\"absolute inset-0 bg-green-600/5 group-hover:bg-green-600/10 transition-colors\"></div>\r\n          <p className=\"text-[9px] text-gray-500 uppercase font-bold tracking-[0.2em] relative z-10\">Énergie Noyau</p>\r\n          <div className=\"flex items-end justify-between mt-2 relative z-10\">\r\n            <span className=\"text-2xl font-mono font-bold text-green-400\">{metrics.batteryLevel}%</span>\r\n            <div className=\"h-1.5 w-12 bg-white/10 rounded-full overflow-hidden\">\r\n              <div className=\"h-full bg-green-500\" style={{ width: `${metrics.batteryLevel}%` }}></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"glass p-4 rounded-2xl border border-white/5 relative overflow-hidden group\">\r\n          <div className=\"absolute inset-0 bg-red-600/5 group-hover:bg-red-600/10 transition-colors\"></div>\r\n          <p className=\"text-[9px] text-gray-500 uppercase font-bold tracking-[0.2em] relative z-10\">Réplication</p>\r\n          <div className=\"flex items-end justify-between mt-2 relative z-10\">\r\n            <span className={`text-2xl font-mono font-bold ${metrics.replicationRate > 0.02 ? 'text-red-500 animate-pulse' : 'text-gray-400'}`}>\r\n              {(metrics.replicationRate * 100).toFixed(2)}x\r\n            </span>\r\n            <span className=\"text-[9px] text-gray-600 font-mono\">/CYCLE</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ROW 2: MAIN CHART (Span 3 on LG) */}\r\n        <div className=\"md:col-span-2 lg:col-span-3 glass p-0 rounded-[2rem] relative overflow-hidden flex flex-col min-h-[400px] border-white/5 shadow-2xl\">\r\n          <div className=\"absolute inset-0 z-0 opacity-40\">\r\n            <LatticeSimulation stress={metrics.latticeStress} />\r\n            <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_20%,#000000_100%)]\"></div>\r\n          </div>\r\n\r\n          <div className=\"relative z-10 p-6 md:p-8 flex flex-col h-full\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className={`w-1.5 h-6 rounded-full shadow-lg ${isDanger ? 'bg-red-600 animate-pulse' : 'bg-blue-500'}`}></div>\r\n                <div>\r\n                  <h3 className=\"text-lg font-bold font-heading uppercase tracking-widest text-white\">Oscillation Quantique</h3>\r\n                  <p className=\"text-[9px] text-gray-500 font-mono\">FLUX TEMPOREL RÉEL</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                <div className=\"px-3 py-1 bg-black/50 border border-white/10 rounded-lg text-[9px] font-mono text-blue-300\">\r\n                  LATENCE: {metrics.latency}ms\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex-1 w-full min-h-[200px]\">\r\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                <AreaChart data={history}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#ffffff05\" vertical={false} />\r\n                  <XAxis dataKey=\"time\" hide />\r\n                  <YAxis hide domain={[0, 100]} />\r\n                  <Tooltip\r\n                    contentStyle={{ background: '#050505', border: '1px solid #333', borderRadius: '8px', fontSize: '10px', fontFamily: 'monospace' }}\r\n                    itemStyle={{ color: '#3b82f6' }}\r\n                  />\r\n                  <Area type=\"monotone\" dataKey=\"greyGooRisk\" stroke={isDanger ? \"#dc2626\" : \"#3b82f6\"} fill={isDanger ? \"url(#dangerGradient)\" : \"url(#safeGradient)\"} strokeWidth={2} isAnimationActive={false} />\r\n                  <defs>\r\n                    <linearGradient id=\"safeGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                      <stop offset=\"5%\" stopColor=\"#3b82f6\" stopOpacity={0.2} />\r\n                      <stop offset=\"95%\" stopColor=\"#3b82f6\" stopOpacity={0} />\r\n                    </linearGradient>\r\n                    <linearGradient id=\"dangerGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                      <stop offset=\"5%\" stopColor=\"#dc2626\" stopOpacity={0.3} />\r\n                      <stop offset=\"95%\" stopColor=\"#dc2626\" stopOpacity={0} />\r\n                    </linearGradient>\r\n                  </defs>\r\n                </AreaChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ROW 2: COMMAND & CONTROL (Span 1 on LG) */}\r\n        <div className=\"md:col-span-2 lg:col-span-1 flex flex-col gap-4\">\r\n          {/* CORE STATUS CARD */}\r\n          <div className={`glass p-6 rounded-[2rem] flex-1 border-t-4 transition-all duration-500 relative overflow-hidden ${isDanger ? 'border-red-500 bg-red-900/10' : 'border-blue-500 bg-blue-900/5'}`}>\r\n            <h3 className=\"text-sm font-bold font-heading uppercase tracking-widest text-white mb-6 flex items-center gap-2\">\r\n              <svg className=\"w-4 h-4 text-gray-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\r\n              Intégrité Système\r\n            </h3>\r\n\r\n            <div className=\"space-y-6\">\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex justify-between text-[10px] text-gray-400 font-mono uppercase\">\r\n                  <span>Synchronisation</span>\r\n                  <span className=\"text-white\">{(100 - metrics.latency / 5).toFixed(1)}%</span>\r\n                </div>\r\n                <div className=\"h-1 bg-white/5 rounded-full overflow-hidden\">\r\n                  <div className=\"h-full bg-blue-500\" style={{ width: `${Math.max(0, 100 - metrics.latency / 5)}%` }}></div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex justify-between text-[10px] text-gray-400 font-mono uppercase\">\r\n                  <span>Protection PQC</span>\r\n                  <span className=\"text-green-400\">ACTIF</span>\r\n                </div>\r\n                <div className=\"h-1 bg-white/5 rounded-full overflow-hidden\">\r\n                  <div className=\"h-full bg-green-500\" style={{ width: `100%` }}></div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-3 bg-black/40 rounded-xl border border-white/5 mt-4\">\r\n                <p className=\"text-[9px] text-gray-500 font-mono leading-relaxed\">\r\n                  {isConstituting ? \">> INITIALIZING CONTAINMENT...\" : isDanger ? \">> CRITICAL ERROR DETECTED.\" : \">> SYSTEM OPTIMAL. MONITORING.\"}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* ACTIONS */}\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            <button\r\n              onClick={handleConfinement}\r\n              disabled={isConstituting || isAnalyzing}\r\n              className={`py-4 rounded-xl font-bold uppercase tracking-widest text-[9px] border transition-all ${isDanger ? 'bg-red-600 border-red-500 text-white animate-pulse' : 'bg-white/5 border-white/10 text-gray-400 hover:bg-white/10'}`}\r\n            >\r\n              {isConstituting ? '...' : 'PURGE'}\r\n            </button>\r\n            <button\r\n              onClick={handleDiagnostic}\r\n              disabled={isConstituting || isAnalyzing}\r\n              className=\"py-4 rounded-xl font-bold uppercase tracking-widest text-[9px] border border-blue-500/20 bg-blue-500/5 text-blue-400 hover:bg-blue-500/10 transition-all\"\r\n            >\r\n              SCAN\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      {diagnosticReport && (\r\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-8 animate-fadeIn\">\r\n          <div className=\"absolute inset-0 bg-black/90 backdrop-blur-xl\" onClick={() => setDiagnosticReport(null)}></div>\r\n          <div className=\"glass w-full max-w-4xl max-h-[80vh] rounded-[2rem] md:rounded-[3rem] p-6 md:p-12 relative z-10 border-blue-500/30 border-2 flex flex-col shadow-[0_0_100px_rgba(59,130,246,0.2)]\">\r\n            <header className=\"flex justify-between items-center mb-6 md:mb-10 pb-6 border-b border-white/10\">\r\n              <h3 className=\"text-xl md:text-2xl font-bold font-heading text-blue-400 flex items-center gap-4 uppercase tracking-tighter\">\r\n                Rapport de Diagnostic\r\n              </h3>\r\n              <button onClick={() => setDiagnosticReport(null)} className=\"p-2 md:p-3 bg-white/5 rounded-full hover:bg-red-500/20 text-gray-500 hover:text-red-500 transition-all\">\r\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" /></svg>\r\n              </button>\r\n            </header>\r\n            <div className=\"flex-1 overflow-y-auto custom-scrollbar pr-2 md:pr-6 font-mono text-xs md:text-sm leading-relaxed text-blue-100 whitespace-pre-wrap\">\r\n              {diagnosticReport}\r\n            </div>\r\n            <footer className=\"mt-4 md:mt-8 pt-6 border-t border-white/5 flex justify-between items-center text-[10px] text-gray-600 font-mono\">\r\n              <span className=\"uppercase tracking-[0.2em] hidden md:inline\">Signature d'Audit: GENESIS_KERNEL_FINAL_Ω</span>\r\n              <button onClick={() => setDiagnosticReport(null)} className=\"w-full md:w-auto px-8 py-3 bg-blue-600 text-white rounded-xl font-bold uppercase tracking-widest text-[10px]\">Fermer le Terminal</button>\r\n            </footer>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ArchitectureViewer;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4587, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/services/sfx.ts"],"sourcesContent":["\r\n// MOTEUR AUDIO PROCÉDURAL (Web Audio API)\r\nclass AudioEngine {\r\n  private ctx: AudioContext | null = null;\r\n  private masterGain: GainNode | null = null;\r\n  private hasInitialized: boolean = false;\r\n\r\n  private init() {\r\n    if (this.hasInitialized) return;\r\n    \r\n    try {\r\n        const AudioContextClass = (window.AudioContext || (window as any).webkitAudioContext);\r\n        if (AudioContextClass) {\r\n            this.ctx = new AudioContextClass();\r\n            this.masterGain = this.ctx.createGain();\r\n            this.masterGain.gain.value = 0.15; // Volume global doux\r\n            this.masterGain.connect(this.ctx.destination);\r\n            this.hasInitialized = true;\r\n        }\r\n    } catch (e) {\r\n        console.warn(\"AudioContext non supporté ou bloqué.\");\r\n    }\r\n  }\r\n\r\n  private async resumeIfNeeded() {\r\n      this.init();\r\n      if (this.ctx && this.ctx.state === 'suspended') {\r\n          try {\r\n              await this.ctx.resume();\r\n          } catch(e) {\r\n              // Ignorer si l'interaction utilisateur n'a pas encore eu lieu\r\n          }\r\n      }\r\n  }\r\n\r\n  playTone(freq: number, type: OscillatorType = 'sine', duration: number = 0.1) {\r\n    this.resumeIfNeeded();\r\n    if (!this.ctx || !this.masterGain) return;\r\n\r\n    try {\r\n        const osc = this.ctx.createOscillator();\r\n        const gain = this.ctx.createGain();\r\n        \r\n        osc.type = type;\r\n        osc.frequency.setValueAtTime(freq, this.ctx.currentTime);\r\n        \r\n        gain.gain.setValueAtTime(0, this.ctx.currentTime);\r\n        gain.gain.linearRampToValueAtTime(1, this.ctx.currentTime + 0.01);\r\n        gain.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + duration);\r\n\r\n        osc.connect(gain);\r\n        gain.connect(this.masterGain);\r\n        \r\n        osc.start();\r\n        osc.stop(this.ctx.currentTime + duration);\r\n    } catch(e) {}\r\n  }\r\n\r\n  // Son de validation (Succès)\r\n  playConfirm() {\r\n    this.playTone(800, 'sine', 0.1);\r\n    setTimeout(() => this.playTone(1200, 'sine', 0.2), 50);\r\n  }\r\n\r\n  // Son d'erreur / Alerte\r\n  playAlert() {\r\n    this.playTone(150, 'sawtooth', 0.3);\r\n    setTimeout(() => this.playTone(120, 'sawtooth', 0.3), 100);\r\n  }\r\n\r\n  // Son d'activation UI (Hover/Click)\r\n  playBlip() {\r\n    this.playTone(2000, 'sine', 0.05);\r\n  }\r\n\r\n  // Son de traitement de données (Typing)\r\n  playData() {\r\n    this.playTone(400 + Math.random() * 200, 'square', 0.03);\r\n  }\r\n  \r\n  // Ambiance de fond (Drone) - À appeler une seule fois\r\n  startDrone() {\r\n     this.resumeIfNeeded();\r\n     if (!this.ctx || !this.masterGain) return;\r\n     try {\r\n         const osc = this.ctx.createOscillator();\r\n         const gain = this.ctx.createGain();\r\n         osc.frequency.value = 40; // Basse fréquence\r\n         gain.gain.value = 0.02;\r\n         osc.connect(gain);\r\n         gain.connect(this.masterGain);\r\n         osc.start();\r\n     } catch(e) {}\r\n  }\r\n}\r\n\r\nexport const sfx = new AudioEngine();\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4679, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/components/BootSequence.tsx"],"sourcesContent":["\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport { sfx } from '../services/sfx';\r\n\r\ninterface BootSequenceProps {\r\n  onComplete: () => void;\r\n}\r\n\r\nconst BootSequence: React.FC<BootSequenceProps> = ({ onComplete }) => {\r\n  // On démarre immédiatement car l'AudioContext a été activé par le LoginScreen\r\n  const [started, setStarted] = useState(true); \r\n  const [logs, setLogs] = useState<string[]>([]);\r\n  const [progress, setProgress] = useState(0);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const bootSteps = [\r\n    { text: \"INITIALISATION DU NOYAU GENESIS v5.3...\", delay: 200 },\r\n    { text: \"AUTHENTIFICATION AGENT... ACCÈS CONFIRMÉ.\", delay: 400 },\r\n    { text: \"ALLOCATION MÉMOIRE HEAP [################----] 80%\", delay: 600 },\r\n    { text: \"CHARGEMENT MODULES NEURAUX...\", delay: 800 },\r\n    { text: \"> Cortex_Vision.sys ... OK\", delay: 900 },\r\n    { text: \"> Audio_Bridge.dll ... OK\", delay: 1000 },\r\n    { text: \"> PQC_Lattice_Guard.exe ... OK\", delay: 1100 },\r\n    { text: \"VÉRIFICATION INTÉGRITÉ POST-QUANTIQUE...\", delay: 1300 },\r\n    { text: \"GÉNÉRATION DES CLÉS ÉPHÉMÈRES...\", delay: 1500 },\r\n    { text: \"SYNCHRONISATION AVEC LE NOYAU DISTANT (GEMINI 2.5 FLASH)...\", delay: 1800 },\r\n    { text: \"ISOLATION DU PROCESSEUR LPU (GROQ)...\", delay: 2000 },\r\n    { text: \"DÉPLOIEMENT DU PARE-FEU COGNITIF...\", delay: 2200 },\r\n    { text: \"SYSTÈME PRÊT. BIENVENUE.\", delay: 2500 },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    if (!started) return;\r\n\r\n    let currentIndex = 0;\r\n    const interval = setInterval(() => {\r\n      if (currentIndex >= bootSteps.length) {\r\n        clearInterval(interval);\r\n        setTimeout(onComplete, 800);\r\n        return;\r\n      }\r\n\r\n      const step = bootSteps[currentIndex];\r\n      setLogs(prev => [...prev, `[${new Date().toISOString().split('T')[1].slice(0, -1)}] ${step.text}`]);\r\n      sfx.playData();\r\n      \r\n      // Auto scroll\r\n      if (containerRef.current) {\r\n        containerRef.current.scrollTop = containerRef.current.scrollHeight;\r\n      }\r\n\r\n      // Update progress bar\r\n      setProgress(((currentIndex + 1) / bootSteps.length) * 100);\r\n\r\n      currentIndex++;\r\n    }, 150);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [started, onComplete]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black z-50 flex flex-col items-center justify-center font-mono text-xs p-8\">\r\n      <div className=\"w-full max-w-3xl space-y-8\">\r\n        <div className=\"flex justify-center mb-12\">\r\n           <div className=\"relative\">\r\n             <div className=\"w-24 h-24 border-4 border-blue-600 rounded-full animate-spin border-t-transparent\"></div>\r\n             <div className=\"absolute inset-0 flex items-center justify-center font-bold text-blue-500 text-2xl animate-pulse\">Ω</div>\r\n           </div>\r\n        </div>\r\n\r\n        <div \r\n          ref={containerRef}\r\n          className=\"h-64 overflow-y-auto bg-gray-900/50 border border-gray-800 p-6 rounded-xl shadow-2xl font-mono text-green-400 space-y-2 custom-scrollbar\"\r\n        >\r\n          {logs.map((log, i) => (\r\n            <div key={i} className=\"whitespace-pre-wrap\">{log}</div>\r\n          ))}\r\n          <div className=\"animate-pulse\">_</div>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <div className=\"flex justify-between text-gray-500 uppercase tracking-widest text-[10px]\">\r\n            <span>Séquence d'amorçage</span>\r\n            <span>{Math.round(progress)}%</span>\r\n          </div>\r\n          <div className=\"h-1 bg-gray-800 rounded-full overflow-hidden\">\r\n            <div \r\n              className=\"h-full bg-blue-600 transition-all duration-300 ease-out shadow-[0_0_20px_#2563eb]\"\r\n              style={{ width: `${progress}%` }}\r\n            ></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"fixed bottom-8 text-gray-600 text-[10px] uppercase tracking-[0.5em]\">\r\n        QuantuMech Systems © 2025\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BootSequence;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;;AAMA,MAAM,eAA4C,CAAC,EAAE,UAAU,EAAE;;IAC/D,8EAA8E;IAC9E,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+LAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+LAAQ,EAAW,EAAE;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+LAAQ,EAAC;IACzC,MAAM,eAAe,IAAA,6LAAM,EAAiB;IAE5C,MAAM,YAAY;QAChB;YAAE,MAAM;YAA2C,OAAO;QAAI;QAC9D;YAAE,MAAM;YAA6C,OAAO;QAAI;QAChE;YAAE,MAAM;YAAsD,OAAO;QAAI;QACzE;YAAE,MAAM;YAAiC,OAAO;QAAI;QACpD;YAAE,MAAM;YAA8B,OAAO;QAAI;QACjD;YAAE,MAAM;YAA6B,OAAO;QAAK;QACjD;YAAE,MAAM;YAAkC,OAAO;QAAK;QACtD;YAAE,MAAM;YAA4C,OAAO;QAAK;QAChE;YAAE,MAAM;YAAoC,OAAO;QAAK;QACxD;YAAE,MAAM;YAA+D,OAAO;QAAK;QACnF;YAAE,MAAM;YAAyC,OAAO;QAAK;QAC7D;YAAE,MAAM;YAAuC,OAAO;QAAK;QAC3D;YAAE,MAAM;YAA4B,OAAO;QAAK;KACjD;IAED,IAAA,gMAAS;kCAAC;YACR,IAAI,CAAC,SAAS;YAEd,IAAI,eAAe;YACnB,MAAM,WAAW;mDAAY;oBAC3B,IAAI,gBAAgB,UAAU,MAAM,EAAE;wBACpC,cAAc;wBACd,WAAW,YAAY;wBACvB;oBACF;oBAEA,MAAM,OAAO,SAAS,CAAC,aAAa;oBACpC;2DAAQ,CAAA,OAAQ;mCAAI;gCAAM,CAAC,CAAC,EAAE,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,EAAE,KAAK,IAAI,EAAE;6BAAC;;oBAClG,+IAAG,CAAC,QAAQ;oBAEZ,cAAc;oBACd,IAAI,aAAa,OAAO,EAAE;wBACxB,aAAa,OAAO,CAAC,SAAS,GAAG,aAAa,OAAO,CAAC,YAAY;oBACpE;oBAEA,sBAAsB;oBACtB,YAAY,AAAC,CAAC,eAAe,CAAC,IAAI,UAAU,MAAM,GAAI;oBAEtD;gBACF;kDAAG;YAEH;0CAAO,IAAM,cAAc;;QAC7B;iCAAG;QAAC;QAAS;KAAW;IAExB,qBACE,mNAAC;QAAI,WAAU;;0BACb,mNAAC;gBAAI,WAAU;;kCACb,mNAAC;wBAAI,WAAU;kCACZ,cAAA,mNAAC;4BAAI,WAAU;;8CACb,mNAAC;oCAAI,WAAU;;;;;;8CACf,mNAAC;oCAAI,WAAU;8CAAmG;;;;;;;;;;;;;;;;;kCAIvH,mNAAC;wBACC,KAAK;wBACL,WAAU;;4BAET,KAAK,GAAG,CAAC,CAAC,KAAK,kBACd,mNAAC;oCAAY,WAAU;8CAAuB;mCAApC;;;;;0CAEZ,mNAAC;gCAAI,WAAU;0CAAgB;;;;;;;;;;;;kCAGjC,mNAAC;wBAAI,WAAU;;0CACb,mNAAC;gCAAI,WAAU;;kDACb,mNAAC;kDAAK;;;;;;kDACN,mNAAC;;4CAAM,KAAK,KAAK,CAAC;4CAAU;;;;;;;;;;;;;0CAE9B,mNAAC;gCAAI,WAAU;0CACb,cAAA,mNAAC;oCACC,WAAU;oCACV,OAAO;wCAAE,OAAO,GAAG,SAAS,CAAC,CAAC;oCAAC;;;;;;;;;;;;;;;;;;;;;;;0BAMvC,mNAAC;gBAAI,WAAU;0BAAsE;;;;;;;;;;;;AAK3F;GA3FM;KAAA;uCA6FS"}},
    {"offset": {"line": 4935, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/components/LoginScreen.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport { sfx } from '../services/sfx';\r\nimport { appwriteService } from '../services/appwriteService';\r\n\r\ninterface LoginScreenProps {\r\n    onLoginSuccess: (agentName: string, isAdmin?: boolean) => void;\r\n}\r\n\r\nconst LoginScreen: React.FC<LoginScreenProps> = ({ onLoginSuccess }) => {\r\n    const [mode, setMode] = useState<'login' | 'register'>('login');\r\n\r\n    // Form States\r\n    const [name, setName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    // Config States\r\n    const [showConfig, setShowConfig] = useState(false);\r\n    const [configEndpoint, setConfigEndpoint] = useState('https://fra.cloud.appwrite.io/v1');\r\n    const [configProject, setConfigProject] = useState('694a84b40023501db111');\r\n\r\n    // UI States\r\n    const [loading, setLoading] = useState(false);\r\n    const [errorMsg, setErrorMsg] = useState('');\r\n    const [isNetworkError, setIsNetworkError] = useState(false);\r\n    const [currentHost, setCurrentHost] = useState('');\r\n    const [scanProgress, setScanProgress] = useState(0);\r\n    const [introDone, setIntroDone] = useState(false);\r\n    const [skipIntro, setSkipIntro] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (typeof window !== 'undefined') {\r\n            setCurrentHost(window.location.hostname);\r\n\r\n            // Charger la config actuelle ou les defaults\r\n            const storedEp = localStorage.getItem('GENESIS_APPWRITE_ENDPOINT');\r\n            const storedPr = localStorage.getItem('GENESIS_APPWRITE_PROJECT');\r\n\r\n            if (storedEp) setConfigEndpoint(storedEp);\r\n            if (storedPr) setConfigProject(storedPr);\r\n        }\r\n    }, []);\r\n\r\n    // Séquence d'intro \"Retinal Scan\" (Stylistique)\r\n    useEffect(() => {\r\n        if (skipIntro) {\r\n            setIntroDone(true);\r\n            return;\r\n        }\r\n\r\n        const interval = setInterval(() => {\r\n            setScanProgress(prev => {\r\n                if (prev >= 100) {\r\n                    clearInterval(interval);\r\n                    setTimeout(() => setIntroDone(true), 500);\r\n                    return 100;\r\n                }\r\n                return prev + 2;\r\n            });\r\n        }, 30);\r\n        return () => clearInterval(interval);\r\n    }, [skipIntro]);\r\n\r\n    const handleInput = (e: React.ChangeEvent<HTMLInputElement>, setter: React.Dispatch<React.SetStateAction<string>>) => {\r\n        setter(e.target.value);\r\n        sfx.playData();\r\n    };\r\n\r\n    const handleModeSwitch = (newMode: 'login' | 'register') => {\r\n        sfx.playBlip();\r\n        setErrorMsg('');\r\n        setIsNetworkError(false);\r\n        setMode(newMode);\r\n    };\r\n\r\n    const handleSkip = () => {\r\n        setSkipIntro(true);\r\n        sfx.playConfirm();\r\n    };\r\n\r\n    const saveConfig = () => {\r\n        appwriteService.init(configProject, configEndpoint);\r\n        localStorage.setItem('GENESIS_APPWRITE_ENDPOINT', configEndpoint);\r\n        localStorage.setItem('GENESIS_APPWRITE_PROJECT', configProject);\r\n        setShowConfig(false);\r\n        sfx.playConfirm();\r\n        setErrorMsg('');\r\n        setIsNetworkError(false);\r\n    };\r\n\r\n    const copyHostname = () => {\r\n        navigator.clipboard.writeText(currentHost);\r\n        sfx.playConfirm();\r\n        alert(\"Domaine copié ! Ajoutez-le dans Appwrite > Overview > Platforms > Add Web App\");\r\n    };\r\n\r\n\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setErrorMsg('');\r\n        setIsNetworkError(false);\r\n\r\n        if (!email || !password || (mode === 'register' && !name)) {\r\n            setErrorMsg(\"CHAMPS REQUIS MANQUANTS.\");\r\n            sfx.playAlert();\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        sfx.playConfirm();\r\n\r\n        // Assurer que le service est initialisé avec la config actuelle\r\n        appwriteService.init(configProject, configEndpoint);\r\n\r\n        try {\r\n            let user;\r\n\r\n            // AUTHENTIFICATION APPWRITE STANDARD\r\n            if (mode === 'register') {\r\n                await appwriteService.register(email, password, name);\r\n                user = await appwriteService.getCurrentUser();\r\n            } else {\r\n                await appwriteService.login(email, password);\r\n                user = await appwriteService.getCurrentUser();\r\n            }\r\n\r\n            if (user) {\r\n                await appwriteService.recordAccessLog(user.name, true);\r\n                onLoginSuccess(user.name, false);\r\n            } else {\r\n                throw new Error(\"Échec récupération session.\");\r\n            }\r\n\r\n        } catch (error: any) {\r\n            console.error(\"Login Process Error:\", error);\r\n            sfx.playAlert();\r\n\r\n            let msg = \"ERREUR D'AUTHENTIFICATION.\";\r\n            const errString = error.message || String(error);\r\n\r\n            // Détection d'erreur CORS / Réseau\r\n            if (errString.includes('Failed to fetch') || errString.includes('Network request failed') || errString.includes('CORS') || errString.includes('NetworkError') || errString.includes('Impossible de joindre')) {\r\n                msg = \"ACCÈS REJETÉ PAR LE SERVEUR (CORS).\";\r\n                setIsNetworkError(true);\r\n            }\r\n            else if (errString.includes('Invalid credentials')) msg = \"IDENTIFIANTS INCORRECTS.\";\r\n            else if (errString.includes('already exists')) msg = \"CET EMAIL EST DÉJÀ ENREGISTRÉ.\";\r\n            else if (errString.includes('short')) msg = \"MOT DE PASSE TROP COURT (8+ CARACTÈRES).\";\r\n            else if (errString.includes('Rate limit')) msg = \"TROP DE TENTATIVES. PATIENTEZ.\";\r\n            else msg = errString;\r\n\r\n            setErrorMsg(msg.toUpperCase());\r\n\r\n            if (!isNetworkError && !errString.includes('Failed to fetch')) {\r\n                await appwriteService.recordAccessLog(email, false);\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black z-[200] flex flex-col items-center justify-center overflow-hidden font-mono select-none\">\r\n            {/* BACKGROUND GRID */}\r\n            <div className=\"absolute inset-0 opacity-20 pointer-events-none\"\r\n                style={{ backgroundImage: 'linear-gradient(#1a1a1a 1px, transparent 1px), linear-gradient(90deg, #1a1a1a 1px, transparent 1px)', backgroundSize: '40px 40px' }}>\r\n            </div>\r\n\r\n            {/* CONFIG MODAL */}\r\n            {showConfig && (\r\n                <div className=\"absolute inset-0 z-50 bg-black/90 backdrop-blur-md flex items-center justify-center p-4 animate-fadeIn\">\r\n                    <div className=\"w-full max-w-md bg-[#0a0a0a] border border-white/20 rounded-2xl p-6 shadow-2xl\">\r\n                        <h3 className=\"text-white font-bold uppercase tracking-widest mb-4 flex items-center gap-2\">\r\n                            <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" /><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" /></svg>\r\n                            Configuration Appwrite\r\n                        </h3>\r\n                        <div className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"text-[10px] text-gray-500 font-bold uppercase block mb-1\">API Endpoint</label>\r\n                                <input type=\"text\" value={configEndpoint} onChange={e => setConfigEndpoint(e.target.value)} className=\"w-full bg-black border border-white/10 rounded-lg p-3 text-xs text-blue-200 font-mono focus:border-blue-500 outline-none\" />\r\n                                <p className=\"text-[9px] text-gray-600 mt-1\">Défaut: https://fra.cloud.appwrite.io/v1</p>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"text-[10px] text-gray-500 font-bold uppercase block mb-1\">Project ID</label>\r\n                                <input type=\"text\" value={configProject} onChange={e => setConfigProject(e.target.value)} className=\"w-full bg-black border border-white/10 rounded-lg p-3 text-xs text-blue-200 font-mono focus:border-blue-500 outline-none\" />\r\n                            </div>\r\n                            <div className=\"flex gap-2 pt-2\">\r\n                                <button onClick={() => setShowConfig(false)} className=\"flex-1 py-3 rounded-lg border border-white/10 text-gray-400 text-xs font-bold uppercase hover:bg-white/5\">Annuler</button>\r\n                                <button onClick={saveConfig} className=\"flex-1 py-3 rounded-lg bg-blue-600 text-white text-xs font-bold uppercase hover:bg-blue-500\">Sauvegarder</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* SCAN SEQUENCE (INTRO) */}\r\n            {!introDone && (\r\n                <div className=\"flex flex-col items-center gap-8 animate-fadeIn relative z-10\">\r\n                    <div className=\"relative w-64 h-64 border border-blue-900/50 rounded-full flex items-center justify-center\">\r\n                        <div className=\"absolute inset-0 border-t-4 border-blue-500 rounded-full animate-spin\"></div>\r\n                        <div className=\"w-56 h-56 bg-blue-900/10 rounded-full flex items-center justify-center backdrop-blur-sm\">\r\n                            <div className=\"text-4xl text-blue-500 animate-pulse\">👁</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"w-64 space-y-2\">\r\n                        <div className=\"flex justify-between text-[10px] text-blue-400 uppercase tracking-widest\">\r\n                            <span>Synchronisation Cloud</span>\r\n                            <span>{Math.round(scanProgress)}%</span>\r\n                        </div>\r\n                        <div className=\"h-1 bg-gray-900 rounded-full overflow-hidden\">\r\n                            <div className=\"h-full bg-blue-600 transition-all duration-100\" style={{ width: `${scanProgress}%` }}></div>\r\n                        </div>\r\n                    </div>\r\n                    <button onClick={handleSkip} className=\"mt-4 px-4 py-2 border border-white/10 rounded hover:bg-white/5 text-[9px] text-gray-500 uppercase tracking-widest transition-colors\">\r\n                        Passer l'initialisation\r\n                    </button>\r\n                </div>\r\n            )}\r\n\r\n            {/* LOGIN FORM */}\r\n            {introDone && (\r\n                <div className=\"relative z-10 w-full max-w-md p-8 animate-slideIn\">\r\n                    <div className={`absolute inset-0 bg-[#0a0a0a]/95 backdrop-blur-xl border rounded-3xl shadow-[0_0_50px_rgba(37,99,235,0.15)] transition-colors duration-500 ${isNetworkError ? 'border-red-500/50 shadow-[0_0_50px_rgba(220,38,38,0.2)]' : 'border-blue-500/30'}`}></div>\r\n\r\n                    <div className=\"relative z-20 flex flex-col gap-6\">\r\n                        {/* Header & Config Button */}\r\n                        <div className=\"flex justify-between items-start\">\r\n                            <div className=\"text-left space-y-2\">\r\n                                <h1 className=\"text-2xl font-bold font-heading text-white tracking-widest uppercase\">Genesis ID</h1>\r\n                                <p className=\"text-[10px] text-blue-400 uppercase tracking-[0.4em]\">Portail d'Accès Sécurisé</p>\r\n                            </div>\r\n                            <button onClick={() => setShowConfig(true)} className=\"p-2 bg-white/5 rounded-lg border border-white/10 text-gray-400 hover:text-white transition-colors\" title=\"Configuration Serveur\">\r\n                                <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" /><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" /></svg>\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* NETWORK ERROR HELPER - DISPLAYED PROMINENTLY */}\r\n                        {isNetworkError && (\r\n                            <div className=\"bg-red-950/40 border border-red-500/50 p-5 rounded-2xl space-y-4 animate-slideIn shadow-[0_0_30px_rgba(220,38,38,0.15)]\">\r\n                                <h4 className=\"text-red-400 text-sm font-bold uppercase flex items-center gap-2\">\r\n                                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" /></svg>\r\n                                    CONNEXION REFUSÉE (CORS)\r\n                                </h4>\r\n                                <p className=\"text-[11px] text-gray-300 leading-relaxed\">\r\n                                    Le serveur Appwrite a bloqué la requête car le domaine actuel n'est pas autorisé.\r\n                                </p>\r\n                                <div className=\"bg-black/60 p-4 rounded-xl border border-red-500/30\">\r\n                                    <p className=\"text-[10px] text-gray-500 uppercase font-bold mb-2\">SOLUTION REQUISE :</p>\r\n                                    <ol className=\"text-[11px] text-gray-300 list-decimal pl-4 space-y-1 mb-3\">\r\n                                        <li>Allez dans <strong>Appwrite Console</strong> &gt; <strong>Overview</strong></li>\r\n                                        <li>Section <strong>Platforms</strong> &gt; <strong>Add Platform</strong> (Web App)</li>\r\n                                        <li>Ajoutez ce domaine exact :</li>\r\n                                    </ol>\r\n                                    <div\r\n                                        onClick={copyHostname}\r\n                                        className=\"bg-red-500/10 p-3 rounded border border-red-500/30 text-red-200 font-mono text-xs text-center cursor-pointer hover:bg-red-500/20 hover:text-white transition-all flex items-center justify-center gap-2 group\"\r\n                                        title=\"Cliquer pour copier\"\r\n                                    >\r\n                                        {currentHost}\r\n                                        <svg className=\"w-3 h-3 text-red-500 group-hover:text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" /></svg>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex gap-2\">\r\n                                    <button onClick={() => setIsNetworkError(false)} className=\"w-full py-2 bg-white/10 hover:bg-white/20 text-gray-300 text-[10px] font-bold uppercase rounded-lg transition-colors\">\r\n                                        Réessayer\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* TABS */}\r\n                        <div className=\"flex bg-black/40 rounded-xl p-1 border border-white/5\">\r\n                            <button onClick={() => handleModeSwitch('login')} className={`flex-1 py-2 text-[10px] font-bold uppercase tracking-widest transition-all rounded-lg ${mode === 'login' ? 'bg-blue-600 text-white shadow-lg' : 'text-gray-500 hover:text-white'}`}>Connexion</button>\r\n                            <button onClick={() => handleModeSwitch('register')} className={`flex-1 py-2 text-[10px] font-bold uppercase tracking-widest transition-all rounded-lg ${mode === 'register' ? 'bg-blue-600 text-white shadow-lg' : 'text-gray-500 hover:text-white'}`}>Inscription</button>\r\n                        </div>\r\n\r\n                        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                            {mode === 'register' && (\r\n                                <div className=\"space-y-1\">\r\n                                    <label className=\"text-[9px] font-bold text-gray-500 uppercase tracking-widest ml-1\">Nom de l'Agent</label>\r\n                                    <div className=\"relative group\">\r\n                                        <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\"><svg className=\"w-4 h-4 text-gray-500 group-focus-within:text-blue-500 transition-colors\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" /></svg></div>\r\n                                        <input type=\"text\" value={name} onChange={(e) => handleInput(e, setName)} className=\"w-full bg-black/50 border border-white/10 focus:border-blue-500 rounded-xl pl-11 pr-4 py-3 text-white font-bold outline-none transition-all focus:bg-white/5 placeholder-gray-700 text-sm\" placeholder=\"EX: AGENT SMITH\" />\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-[9px] font-bold text-gray-500 uppercase tracking-widest ml-1\">Email</label>\r\n                                <div className=\"relative group\">\r\n                                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\"><svg className=\"w-4 h-4 text-gray-500 group-focus-within:text-blue-500 transition-colors\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207\" /></svg></div>\r\n                                    <input type=\"email\" value={email} onChange={(e) => handleInput(e, setEmail)} className=\"w-full bg-black/50 border border-white/10 focus:border-blue-500 rounded-xl pl-11 pr-4 py-3 text-white font-mono outline-none transition-all focus:bg-white/5 placeholder-gray-700 text-sm\" placeholder=\"agent@genesis.core\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-[9px] font-bold text-gray-500 uppercase tracking-widest ml-1\">Mot de passe</label>\r\n                                <div className=\"relative group\">\r\n                                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\"><svg className=\"w-4 h-4 text-gray-500 group-focus-within:text-blue-500 transition-colors\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" /></svg></div>\r\n                                    <input type=\"password\" value={password} onChange={(e) => handleInput(e, setPassword)} className=\"w-full bg-black/50 border border-white/10 focus:border-blue-500 rounded-xl pl-11 pr-4 py-3 text-white font-mono outline-none transition-all focus:bg-white/5 placeholder-gray-700 text-sm\" placeholder=\"••••••••••••\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {errorMsg && !isNetworkError && (\r\n                                <div className=\"p-3 bg-red-900/20 border border-red-500/30 rounded-xl text-center animate-shake flex items-center justify-center gap-2\">\r\n                                    <svg className=\"w-4 h-4 text-red-500 shrink-0\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\r\n                                    <p className=\"text-[10px] text-red-400 font-bold uppercase tracking-widest\">{errorMsg}</p>\r\n                                </div>\r\n                            )}\r\n\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={loading}\r\n                                className={`w-full py-4 rounded-xl font-bold uppercase tracking-[0.2em] transition-all duration-300 relative overflow-hidden group mt-4 ${loading\r\n                                    ? 'bg-blue-900/50 text-blue-300 cursor-wait'\r\n                                    : 'bg-blue-600 hover:bg-blue-500 text-white shadow-[0_0_20px_rgba(37,99,235,0.4)] hover:shadow-[0_0_30px_rgba(37,99,235,0.6)] transform hover:scale-[1.02]'\r\n                                    }`}\r\n                            >\r\n                                {loading ? (\r\n                                    <div className=\"flex items-center justify-center gap-2\">\r\n                                        <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\r\n                                        <span className=\"text-xs\">Authentification...</span>\r\n                                    </div>\r\n                                ) : (\r\n                                    <span className=\"relative z-10\">{mode === 'login' ? 'ACCÉDER AU SYSTÈME' : 'INITIALISER L\\'AGENT'}</span>\r\n                                )}\r\n                            </button>\r\n                        </form>\r\n\r\n                        <div className=\"text-center pt-4 border-t border-white/5 flex flex-col gap-2\">\r\n                            <p className=\"text-[8px] text-gray-600\">\r\n                                PROJET ID: <span className=\"text-gray-500 font-mono\">{configProject}</span>\r\n                            </p>\r\n                            <p className=\"text-[8px] text-gray-700\">\r\n                                <span className=\"text-blue-900\">SECURE PQC LINK ESTABLISHED</span> • v1.0.6\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <style>{`\r\n        @keyframes shake {\r\n            0%, 100% { transform: translateX(0); }\r\n            25% { transform: translateX(-5px); }\r\n            75% { transform: translateX(5px); }\r\n        }\r\n        .animate-shake { animation: shake 0.3s ease-in-out; }\r\n      `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoginScreen;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6018, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/components/ClientEntry.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect, Suspense } from 'react';\r\nimport Layout from './Layout';\r\nimport ArchitectureViewer from './ArchitectureViewer';\r\nimport BootSequence from './BootSequence';\r\nimport LoginScreen from './LoginScreen';\r\nimport { AppView, ThreatTrajectory } from '../types';\r\nimport { appwriteService } from '../services/appwriteService';\r\n\r\n// Lazy Loading\r\nconst Visualizer = React.lazy(() => import('./Visualizer'));\r\nconst SearchPortal = React.lazy(() => import('./SearchPortal'));\r\nconst KillSwitch = React.lazy(() => import('./KillSwitch'));\r\nconst DebuggingAssistant = React.lazy(() => import('./DebuggingAssistant'));\r\nconst ConsciousnessStream = React.lazy(() => import('./ConsciousnessStream'));\r\nconst GlobalMap = React.lazy(() => import('./GlobalMap'));\r\nconst PostQuantumVault = React.lazy(() => import('./PostQuantumVault'));\r\nconst ThreatMonitor = React.lazy(() => import('./ThreatMonitor'));\r\nconst EvolutionLab = React.lazy(() => import('./EvolutionLab'));\r\nconst MultiAgentFusion = React.lazy(() => import('./MultiAgentFusion'));\r\nconst LiveSession = React.lazy(() => import('./LiveSession'));\r\nconst AdminDashboard = React.lazy(() => import('./AdminDashboard'));\r\nconst UserDashboard = React.lazy(() => import('./UserDashboard'));\r\n\r\n// Loader\r\nconst ViewLoader = () => (\r\n    <div className=\"flex items-center justify-center h-full w-full\">\r\n        <div className=\"flex flex-col items-center gap-4\">\r\n            <div className=\"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\r\n            <span className=\"text-xs text-blue-400 font-mono animate-pulse\">LOADING MODULE...</span>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default function ClientEntry() {\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n    const [isAdminMode, setIsAdminMode] = useState(false);\r\n    const [agentIdentity, setAgentIdentity] = useState<string>('');\r\n    const [booted, setBooted] = useState(false);\r\n    const [shutdown, setShutdown] = useState(false);\r\n    const [activeView, setActiveView] = useState<AppView>('architecture');\r\n    const [authLoading, setAuthLoading] = useState(true);\r\n\r\n    const [pendingSearch, setPendingSearch] = useState<string | null>(null);\r\n    const [pendingMapQuery, setPendingMapQuery] = useState<string | null>(null);\r\n    const [pendingVisual, setPendingVisual] = useState<{ prompt: string; type: 'image' | 'video' } | null>(null);\r\n    const [pendingNexus, setPendingNexus] = useState<{ agentId: string; query: string } | null>(null);\r\n    const [globalAction, setGlobalAction] = useState<{ type: string, payload?: any } | null>(null);\r\n\r\n    const [activeTrajectory, setActiveTrajectory] = useState<ThreatTrajectory | null>(null);\r\n\r\n    const [mapConfig, setMapConfig] = useState<{\r\n        layer?: 'lattice' | 'optical' | 'thermal';\r\n        ghostMode?: boolean;\r\n        filters?: string[];\r\n    }>({});\r\n\r\n    useEffect(() => {\r\n        // Client-side only check\r\n        if (typeof window !== 'undefined') {\r\n            const checkSession = async () => {\r\n                try {\r\n                    const user = await appwriteService.getCurrentUser();\r\n                    if (user) {\r\n                        setAgentIdentity(user.name);\r\n                        setIsLoggedIn(true);\r\n                    }\r\n                } catch (e) {\r\n                    console.log(\"Pas de session active.\", e);\r\n                } finally {\r\n                    setAuthLoading(false);\r\n                }\r\n            };\r\n            checkSession();\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (typeof window !== 'undefined') {\r\n            const handleShutdown = () => setShutdown(true);\r\n            window.addEventListener('genesis-shutdown', handleShutdown);\r\n            return () => window.removeEventListener('genesis-shutdown', handleShutdown);\r\n        }\r\n    }, []);\r\n\r\n    const handleVoiceSearch = (query: string) => {\r\n        setPendingSearch(query);\r\n        setActiveView('search');\r\n    };\r\n\r\n    const handleMapQuery = (query: string) => {\r\n        setPendingMapQuery(query);\r\n        setActiveView('map');\r\n    };\r\n\r\n    const handleVoiceVisualize = (prompt: string, type: 'image' | 'video') => {\r\n        setPendingVisual({ prompt, type });\r\n        setActiveView('visualizer');\r\n    };\r\n\r\n    const handleTrackThreat = (trajectory: ThreatTrajectory) => {\r\n        setActiveTrajectory(trajectory);\r\n        setMapConfig(prev => ({ ...prev, layer: 'thermal' }));\r\n        setActiveView('map');\r\n    };\r\n\r\n    const handleGlobalAction = (type: string, payload?: any) => {\r\n        switch (type) {\r\n            case 'trigger_mutation': setActiveView('evolution'); break;\r\n            case 'update_map_config':\r\n                setMapConfig(prev => ({ ...prev, ...payload }));\r\n                if (activeView !== 'map') setActiveView('map');\r\n                break;\r\n            case 'nexus_interaction':\r\n                setPendingNexus({ agentId: payload.agentId, query: payload.query });\r\n                setActiveView('fusion');\r\n                break;\r\n            case 'system_control': {\r\n                const { action } = payload;\r\n                if (action === 'reboot' && typeof window !== 'undefined') window.location.reload();\r\n                if (action === 'shutdown') setShutdown(true);\r\n                if (action === 'logout') handleLogout();\r\n                if (action === 'open_admin') setIsAdminMode(true);\r\n                break;\r\n            }\r\n            case 'threat_defense': {\r\n                setMapConfig(prev => ({ ...prev, layer: 'thermal', ghostMode: true }));\r\n                if (activeView !== 'threats') setActiveView('threats');\r\n                break;\r\n            }\r\n            case 'update_vis_config': {\r\n                setPendingVisual({ prompt: \"AUDIO REACTIVE CORE\", type: 'image' });\r\n                if (activeView !== 'visualizer') setActiveView('visualizer');\r\n                break;\r\n            }\r\n        }\r\n        setGlobalAction({ type, payload });\r\n    };\r\n\r\n    const handleLogout = async () => {\r\n        await appwriteService.logout();\r\n        setIsLoggedIn(false);\r\n        setIsAdminMode(false);\r\n        setBooted(false);\r\n    };\r\n\r\n    const renderView = () => {\r\n        switch (activeView) {\r\n            case 'architecture': return <ArchitectureViewer />;\r\n            case 'evolution': return <EvolutionLab autoTrigger={globalAction?.type === 'trigger_mutation'} onConsumed={() => setGlobalAction(null)} />;\r\n            case 'consciousness': return <ConsciousnessStream initialTopic={globalAction?.type === 'meditate' ? globalAction.payload : null} onConsumed={() => setGlobalAction(null)} />;\r\n            case 'vault': return <PostQuantumVault />;\r\n            case 'threats': return <ThreatMonitor onTrackThreat={handleTrackThreat} />;\r\n            case 'fusion': return <MultiAgentFusion initialParams={pendingNexus} onConsumed={() => setPendingNexus(null)} />;\r\n            case 'map': return <GlobalMap initialQuery={pendingMapQuery} externalConfig={mapConfig} activeTrajectory={activeTrajectory} onConsumed={() => setPendingMapQuery(null)} />;\r\n            case 'visualizer': return <Visualizer initialParams={pendingVisual} onConsumed={() => setPendingVisual(null)} />;\r\n            case 'search': return <SearchPortal initialQuery={pendingSearch} onConsumed={() => setPendingSearch(null)} />;\r\n            case 'debugger': return <DebuggingAssistant />;\r\n            case 'killswitch': return <KillSwitch />;\r\n            case 'dashboard': return <UserDashboard identity={agentIdentity} onNavigate={setActiveView} />;\r\n            case 'lab': return (\r\n                <LiveSession\r\n                    onNavigate={setActiveView}\r\n                    onVoiceSearch={handleVoiceSearch}\r\n                    onVoiceVisualize={handleVoiceVisualize}\r\n                    onMapQuery={handleMapQuery}\r\n                    onAction={handleGlobalAction}\r\n                />\r\n            );\r\n            default: return <ArchitectureViewer />;\r\n        }\r\n    };\r\n\r\n    // Safe checks for SS\r\n    if (authLoading) {\r\n        return <div className=\"fixed inset-0 bg-black flex items-center justify-center\"><div className=\"w-10 h-10 border-4 border-blue-600 rounded-full animate-spin border-t-transparent\"></div></div>;\r\n    }\r\n\r\n    if (shutdown) {\r\n        return (\r\n            <div className=\"fixed inset-0 bg-black flex items-center justify-center z-[9999]\">\r\n                <div className=\"text-center space-y-6\">\r\n                    <p className=\"text-red-600 font-mono text-xl animate-pulse\">SYSTEM HALTED</p>\r\n                    <div className=\"h-1 w-32 bg-red-900 mx-auto\"></div>\r\n                    <p className=\"text-gray-800 font-mono text-xs\">NOYAU DÉTRUIT. VEUILLEZ REDÉMARRER MANUELLEMENT.</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!isLoggedIn) {\r\n        return <LoginScreen onLoginSuccess={(name, admin) => { setIsLoggedIn(true); setAgentIdentity(name); if (admin) setIsAdminMode(true); }} />;\r\n    }\r\n\r\n    if (isAdminMode) {\r\n        return (\r\n            <Suspense fallback={<div className=\"fixed inset-0 bg-black/90 flex items-center justify-center text-red-500 font-mono\">INITIALIZING ADMIN CORE...</div>}>\r\n                <AdminDashboard onClose={() => { setIsAdminMode(false); }} />\r\n            </Suspense>\r\n        );\r\n    }\r\n\r\n    if (!booted) {\r\n        return <BootSequence onComplete={() => setBooted(true)} />;\r\n    }\r\n\r\n    return (\r\n        <Layout activeView={activeView} setView={setActiveView}>\r\n            <Suspense fallback={<ViewLoader />}>\r\n                {renderView()}\r\n            </Suspense>\r\n            <div className=\"fixed top-4 right-4 z-50 lg:hidden user-select-none\">\r\n                <button onClick={handleLogout} className=\"text-[10px] text-red-500 bg-black/50 px-2 py-1 rounded border border-red-500/20\">LOGOUT</button>\r\n            </div>\r\n        </Layout>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}
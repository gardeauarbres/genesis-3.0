{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gard%20Eau%20Arbres/Desktop/genesis/components/PostQuantumVault.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport { NeuralKey } from '../types';\r\nimport { geminiService } from '../services/geminiService';\r\nimport { memory } from '../services/memory';\r\nimport { sfx } from '../services/sfx';\r\nimport { appwriteService } from '../services/appwriteService';\r\n\r\nconst PostQuantumVault: React.FC = () => {\r\n  const [keys, setKeys] = useState<NeuralKey[]>([]);\r\n  const [generating, setGenerating] = useState(false);\r\n  const [syncStatus, setSyncStatus] = useState<'LOCAL' | 'CLOUD'>('LOCAL');\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    initializeVault();\r\n  }, []);\r\n\r\n  const initializeVault = async () => {\r\n    // Try to get authenticated user for cloud sync\r\n    try {\r\n      const user = await appwriteService.getCurrentUser();\r\n      if (user) {\r\n        setUserId(user.$id);\r\n        setSyncStatus('CLOUD');\r\n\r\n        // Load keys from cloud\r\n        const cloudKeys = await appwriteService.getVaultKeys(user.$id);\r\n        if (cloudKeys.length > 0) {\r\n          setKeys(cloudKeys);\r\n          return;\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(\"[VAULT] Cloud sync unavailable, using local storage\");\r\n    }\r\n\r\n    // Fallback to local memory\r\n    const fragments = await memory.getByType('key');\r\n    if (fragments.length > 0) {\r\n      setKeys(fragments.map(f => f.metadata));\r\n    } else {\r\n      // Initial demo data\r\n      setKeys([\r\n        { id: 'NK-892', algorithm: 'Kyber-1024', entropy: 99.8, status: 'active', signature: 'LATTICE_Œ±_892_V2' },\r\n        { id: 'NK-421', algorithm: 'Dilithium-5', entropy: 99.1, status: 'active', signature: 'SIG_FORCE_421_Œ©' }\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const generateKey = async () => {\r\n    setGenerating(true);\r\n    sfx.playData();\r\n    try {\r\n      const algo = ['Kyber-1024', 'Dilithium-5', 'Falcon-1024', 'SPHINCS+'][Math.floor(Math.random() * 4)];\r\n      const keyData = await geminiService.generatePQCKey(algo);\r\n\r\n      const newKey: NeuralKey = {\r\n        id: keyData.id || `NK-${Math.floor(Math.random() * 1000)}`,\r\n        algorithm: keyData.algorithm || algo,\r\n        entropy: keyData.entropy || 95.5,\r\n        status: 'pending',\r\n        signature: keyData.signature || 'GEN_SIG_UNKNOWN'\r\n      };\r\n\r\n      // Save to cloud if authenticated\r\n      if (userId && syncStatus === 'CLOUD') {\r\n        await appwriteService.saveVaultKey(userId, newKey);\r\n      }\r\n\r\n      // Also save to local memory as backup\r\n      await memory.save({\r\n        type: 'key',\r\n        content: `Cl√© g√©n√©r√©e ${newKey.id}`,\r\n        metadata: newKey\r\n      });\r\n\r\n      setKeys(prev => [newKey, ...prev]);\r\n      sfx.playConfirm();\r\n    } catch (e) {\r\n      console.error(e);\r\n      sfx.playAlert();\r\n    } finally {\r\n      setGenerating(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8 animate-fadeIn h-full flex flex-col\">\r\n      <header className=\"flex justify-between items-end\">\r\n        <div>\r\n          <div className=\"flex items-center gap-4 mb-2\">\r\n            <h2 className=\"text-4xl font-bold font-heading\">Coffre-fort PQC</h2>\r\n            <span className={`text-[9px] font-mono px-2 py-0.5 rounded border ${syncStatus === 'CLOUD' ? 'text-blue-400 border-blue-500/30 bg-blue-500/10' : 'text-green-400 border-green-500/30 bg-green-500/10'}`}>\r\n              {syncStatus === 'CLOUD' ? '‚òÅ CLOUD_SYNC' : 'üíæ LOCAL'}\r\n            </span>\r\n          </div>\r\n          <p className=\"text-gray-400\">Gestion des signatures neurales bas√©es sur les r√©seaux cryptographiques.</p>\r\n        </div>\r\n        <button\r\n          onClick={generateKey}\r\n          disabled={generating}\r\n          className=\"px-6 py-3 bg-blue-600 rounded-xl font-bold hover:bg-blue-500 transition-all uppercase text-[10px] tracking-widest shadow-[0_0_20px_rgba(37,99,235,0.4)] disabled:opacity-50 flex items-center gap-2\"\r\n        >\r\n          {generating ? <div className=\"w-3 h-3 rounded-full border-2 border-white/30 border-t-white animate-spin\" /> : null}\r\n          {generating ? 'Calcul Lattice...' : 'G√©n√©rer Signature Neurale'}\r\n        </button>\r\n      </header>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 overflow-y-auto custom-scrollbar pr-2 pb-4\">\r\n        {keys.map((key) => (\r\n          <div key={key.id} className=\"group perspective\">\r\n            <div className=\"glass p-8 rounded-3xl border border-white/5 relative overflow-hidden transition-all duration-500 hover:neon-border hover:-translate-y-2 hover:rotate-1\">\r\n              <div className=\"absolute top-0 right-0 p-4\">\r\n                <div className={`w-2 h-2 rounded-full ${key.status === 'active' ? 'bg-green-500 animate-pulse' : 'bg-yellow-500'}`}></div>\r\n              </div>\r\n\r\n              <div className=\"flex flex-col gap-6\">\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div className=\"w-12 h-12 rounded-xl bg-blue-600/20 flex items-center justify-center text-blue-500 border border-blue-500/20\">\r\n                    <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z\" /></svg>\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"font-bold text-xl\">{key.id}</h3>\r\n                    <p className=\"text-[10px] text-gray-500 font-mono uppercase\">{key.algorithm}</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <div className=\"flex justify-between text-[9px] uppercase font-bold text-gray-600 mb-1\">\r\n                      <span>Niveau d'Entropie</span>\r\n                      <span>{key.entropy}%</span>\r\n                    </div>\r\n                    <div className=\"h-1 bg-white/5 rounded-full overflow-hidden\">\r\n                      <div className=\"h-full bg-blue-500\" style={{ width: `${key.entropy}%` }}></div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"p-3 bg-black/40 rounded-lg border border-white/5\">\r\n                    <p className=\"text-[8px] text-gray-600 uppercase mb-1 font-bold\">Signature de Sortie</p>\r\n                    <p className=\"text-[11px] font-mono text-blue-400 break-all leading-tight\">{key.signature}</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex gap-2\">\r\n                  <button className=\"flex-1 py-2 rounded-lg bg-white/5 text-[9px] font-bold uppercase hover:bg-white/10 transition-colors\">R√©voquer</button>\r\n                  <button className=\"flex-1 py-2 rounded-lg bg-white/5 text-[9px] font-bold uppercase hover:bg-white/10 transition-colors\">Exporter</button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Decorative scan line */}\r\n              <div className=\"absolute inset-0 pointer-events-none opacity-5 group-hover:opacity-10\">\r\n                <div className=\"w-full h-1 bg-blue-400 absolute animate-[vaultScan_3s_linear_infinite]\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <style>{`\r\n        @keyframes vaultScan {\r\n          from { top: -10%; }\r\n          to { top: 110%; }\r\n        }\r\n        .perspective { perspective: 1000px; }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostQuantumVault;\r\n"],"names":[],"mappings":"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"}}]
}